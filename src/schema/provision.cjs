"use strict";module.exports = validate30;module.exports.default = validate30;const schema42 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"provision","type":"object","properties":{"internal":{"type":"boolean","default":false,"description":"True if provisioning failed, and the internal schema values are used"},"v0":{"type":"object","description":"Old provisioning for FicLab v0.6.x","properties":{"ffnet-delay-factor":{"type":"number","default":1}}},"default":{"$ref":"settings#","default":{},"description":"Default settings"},"analysis":{"type":"string","format":"uri","minLength":1,"description":"API endpoint for story analysys"},"tosEpoch":{"type":"integer","default":0,"description":"When the TOS was last updated"},"userSettingsEpoch":{"type":"integer","default":0,"description":"Only allow user settings saved at or after this timestamp"},"userSettingsOverride":{"type":"array","default":[],"description":"Override saved user settings","items":{"type":"object","default":{},"description":"A single override rule","required":["from","fromVersion","until","untilVersion","production","origin","context","id","set"],"properties":{"from":{"type":"integer","default":0,"description":"Apply the rule beginning from this timestamp"},"fromVersion":{"type":"string","default":"","description":"Apply the rule beginning from this version"},"until":{"type":"integer","default":0,"description":"Apply the rule until this timestamp"},"untilVersion":{"type":"string","default":"","description":"Apply the rule until this version"},"production":{"type":"boolean","default":true,"description":"Whether to apply this rule to production"},"origin":{"type":"array","default":[],"description":"List of origins to apply the override for","items":{"type":"string","minLength":1}},"context":{"type":"array","default":[],"description":"List of contexts to apply the override for","items":{"type":"string","minLength":1}},"id":{"type":"array","default":[],"description":"List of client IDs to apply this override for","items":{"type":"string","minLength":1}},"agent":{"type":"array","default":[],"description":"List of user-agent regexes to apply this override for","items":{"type":"string","minLength":1,"format":"regex"}},"set":{"type":"object","default":{},"description":"Subset of settings object to merge"}}}}},"required":["internal","default","userSettingsEpoch"]};const schema43 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"settings","$defs":{"flag":{"type":"boolean"}},"type":"object","required":["timestamp","production","id","format","archive","services","cover","book","misc","tweaks","flags"],"properties":{"timestamp":{"type":"integer","default":0,"description":"Timestamp when these settings were saved"},"production":{"type":"boolean","default":true,"description":"Whether FicLab is running in production mode"},"id":{"type":"string","default":"","description":"Client ID"},"format":{"type":"string","description":"Output file format","enum":["epub","mobi","pdf","md","txt","flb","docx","image","html","txt-tts"],"default":"epub"},"archive":{"type":"boolean","description":"Whether to participate in the archive project","default":false},"services":{"type":"object","description":"Service API endpoints","default":{},"required":["transcode"],"properties":{"transcode":{"type":"string","description":"Transcode API endpoint","default":"wss://transcode.ficlab.com/1"},"archive":{"type":"string","description":"Archive project API endpoint","default":"wss://archive.l.ficlab.com:4443/v1"}}},"cover":{"type":"object","description":"Cover image configuration","default":{},"required":["scheme","crop","dark","logo","title","enable","custom"],"properties":{"scheme":{"type":"string","default":"auto","description":"Colour scheme","enum":["auto","red","orange","yellow","green","blue","purple","pink","brown","grey","black","clear"]},"crop":{"type":"string","default":"auto","description":"Cropping mode for the supplied story image","enum":["auto","on","off","fill"]},"dark":{"type":"boolean","default":false,"description":"Whether to use darker scheme colours"},"logo":{"type":"boolean","default":true,"description":"Whether to include the publisher logo on the cover"},"title":{"type":"boolean","default":true,"description":"Whether to render the title bar"},"enable":{"type":"boolean","default":true,"description":"Whether to generate a cover image at all"},"custom":{"type":"string","default":"","description":"Custom cover image"}}},"book":{"type":"object","default":{},"description":"Book configuration","required":["tags","status","numbers","paragraph","font","size","summary","cleanPunctuation","smartQuotes","stripBreaks","detectBreaks","matchBreaks"],"properties":{"tags":{"type":"array","default":[],"description":"Additional subject tags","items":{"type":"string","minLength":1}},"status":{"type":"string","default":"auto","description":"Story completion status","enum":["auto","complete","in-progress","hiatus","abandoned"]},"numbers":{"type":"string","default":"auto","description":"Chapter numbering mode","enum":["auto","on","off"]},"paragraph":{"type":"string","default":"space+indent","description":"Paragraph separation mode","enum":["space+indent","space","indent"]},"font":{"type":"string","default":"serif","description":"Font family to use for body text","enum":["serif","sans-serif"]},"size":{"type":"number","default":1,"description":"Scaling factor for body text"},"summary":{"type":"string","default":"","description":"Story sumary / description"},"cleanPunctuation":{"type":"boolean","default":true,"description":"Automatically clean up punctuation"},"smartQuotes":{"type":"boolean","default":true,"description":"Use smart quotes"},"stripBreaks":{"type":"boolean","default":false,"description":"Remove section breaks"},"detectBreaks":{"type":"boolean","default":true,"description":"Attempt to automatically detect textual section breaks"},"matchBreaks":{"type":"string","default":"","description":"Replace any matching paragraphs with a section break"}}},"misc":{"type":"object","default":{},"description":"Misc settings with no other logical home","required":["abandonAfter"],"properties":{"abandonAfter":{"type":"integer","default":31557600,"minimum":0,"description":"Number of seconds after which an in-progress story is considered abandoned"}}},"tweaks":{"type":"object","default":{},"description":"Various advanced controls","required":["delayFactor","backoff","pause","bucketSize","bucketRate","disable"],"properties":{"delayFactor":{"type":"number","default":0.05,"minimum":0,"description":"Delay factor to apply to resource fetching"},"maxDelay":{"type":"number","default":20,"minimum":0,"description":"Threshold beyond which the delay factor is considered an error"},"backoff":{"type":"number","default":1.5,"minimum":1,"description":"Backoff to apply to delay factor on 429 error"},"pause":{"type":"number","default":10,"minimum":0,"description":"How long to pause on 429 error"},"bucketSize":{"type":"number","default":20,"minimum":0,"description":"Burst bucket size"},"bucketRate":{"type":"number","default":2,"minimum":0,"description":"How fast the bucket refills (reqs/sec)"},"disable":{"type":"string","default":"","description":"Disable downloads, with the provided error message"},"warning":{"type":"string","default":"","description":"Display the provided warning message at idle-ready"},"gatherRecent":{"type":"integer","default":0,"description":"Gather metadata for recently published stories (0 to disable)"}}},"flags":{"type":"object","default":{},"description":"Feature flags (gatekeeper for development features)","required":["debugDetectBreaks"],"properties":{"debugDetectBreaks":{"$ref":"#/$defs/flag","default":false}}}}};const schema44 = {"type":"boolean"};const func7 = Object.prototype.hasOwnProperty;const func0 = require("ajv/dist/runtime/equal").default;const func12 = require("ajv/dist/runtime/ucs2length").default;function validate31(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="settings" */;let vErrors = null;let errors = 0;const evaluated0 = validate31.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(errors === 0){if(data && typeof data == "object" && !Array.isArray(data)){if(data.timestamp === undefined || data.timestamp === null || data.timestamp === ""){data.timestamp = 0;}if(data.production === undefined || data.production === null || data.production === ""){data.production = true;}if(data.id === undefined || data.id === null || data.id === ""){data.id = "";}if(data.format === undefined || data.format === null || data.format === ""){data.format = "epub";}if(data.archive === undefined || data.archive === null || data.archive === ""){data.archive = false;}if(data.services === undefined || data.services === null || data.services === ""){data.services = {};}if(data.cover === undefined || data.cover === null || data.cover === ""){data.cover = {};}if(data.book === undefined || data.book === null || data.book === ""){data.book = {};}if(data.misc === undefined || data.misc === null || data.misc === ""){data.misc = {};}if(data.tweaks === undefined || data.tweaks === null || data.tweaks === ""){data.tweaks = {};}if(data.flags === undefined || data.flags === null || data.flags === ""){data.flags = {};}let missing0;if((((((((((((data.timestamp === undefined) && (missing0 = "timestamp")) || ((data.production === undefined) && (missing0 = "production"))) || ((data.id === undefined) && (missing0 = "id"))) || ((data.format === undefined) && (missing0 = "format"))) || ((data.archive === undefined) && (missing0 = "archive"))) || ((data.services === undefined) && (missing0 = "services"))) || ((data.cover === undefined) && (missing0 = "cover"))) || ((data.book === undefined) && (missing0 = "book"))) || ((data.misc === undefined) && (missing0 = "misc"))) || ((data.tweaks === undefined) && (missing0 = "tweaks"))) || ((data.flags === undefined) && (missing0 = "flags"))){validate31.errors = [{instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: missing0},message:"must have required property '"+missing0+"'"}];return false;}else {const _errs1 = errors;for(const key0 in data){if(!(func7.call(schema43.properties, key0))){delete data[key0];}}if(_errs1 === errors){let data0 = data.timestamp;const _errs2 = errors;if(!(((typeof data0 == "number") && (!(data0 % 1) && !isNaN(data0))) && (isFinite(data0)))){let dataType0 = typeof data0;let coerced0 = undefined;if(!(coerced0 !== undefined)){if(dataType0 === "boolean" || data0 === null
              || (dataType0 === "string" && data0 && data0 == +data0 && !(data0 % 1))){coerced0 = +data0;}else {validate31.errors = [{instancePath:instancePath+"/timestamp",schemaPath:"#/properties/timestamp/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced0 !== undefined){data0 = coerced0;if(data !== undefined){data["timestamp"] = coerced0;}}}var valid0 = _errs2 === errors;if(valid0){let data1 = data.production;const _errs4 = errors;if(typeof data1 !== "boolean"){let coerced1 = undefined;if(!(coerced1 !== undefined)){if(data1 === "false" || data1 === 0 || data1 === null){coerced1 = false;}else if(data1 === "true" || data1 === 1){coerced1 = true;}else {validate31.errors = [{instancePath:instancePath+"/production",schemaPath:"#/properties/production/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced1 !== undefined){data1 = coerced1;if(data !== undefined){data["production"] = coerced1;}}}var valid0 = _errs4 === errors;if(valid0){let data2 = data.id;const _errs6 = errors;if(typeof data2 !== "string"){let dataType2 = typeof data2;let coerced2 = undefined;if(!(coerced2 !== undefined)){if(dataType2 == "number" || dataType2 == "boolean"){coerced2 = "" + data2;}else if(data2 === null){coerced2 = "";}else {validate31.errors = [{instancePath:instancePath+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced2 !== undefined){data2 = coerced2;if(data !== undefined){data["id"] = coerced2;}}}var valid0 = _errs6 === errors;if(valid0){let data3 = data.format;const _errs8 = errors;if(typeof data3 !== "string"){let dataType3 = typeof data3;let coerced3 = undefined;if(!(coerced3 !== undefined)){if(dataType3 == "number" || dataType3 == "boolean"){coerced3 = "" + data3;}else if(data3 === null){coerced3 = "";}else {validate31.errors = [{instancePath:instancePath+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced3 !== undefined){data3 = coerced3;if(data !== undefined){data["format"] = coerced3;}}}if(!((((((((((data3 === "epub") || (data3 === "mobi")) || (data3 === "pdf")) || (data3 === "md")) || (data3 === "txt")) || (data3 === "flb")) || (data3 === "docx")) || (data3 === "image")) || (data3 === "html")) || (data3 === "txt-tts"))){validate31.errors = [{instancePath:instancePath+"/format",schemaPath:"#/properties/format/enum",keyword:"enum",params:{allowedValues: schema43.properties.format.enum},message:"must be equal to one of the allowed values"}];return false;}var valid0 = _errs8 === errors;if(valid0){let data4 = data.archive;const _errs10 = errors;if(typeof data4 !== "boolean"){let coerced4 = undefined;if(!(coerced4 !== undefined)){if(data4 === "false" || data4 === 0 || data4 === null){coerced4 = false;}else if(data4 === "true" || data4 === 1){coerced4 = true;}else {validate31.errors = [{instancePath:instancePath+"/archive",schemaPath:"#/properties/archive/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced4 !== undefined){data4 = coerced4;if(data !== undefined){data["archive"] = coerced4;}}}var valid0 = _errs10 === errors;if(valid0){let data5 = data.services;const _errs12 = errors;if(errors === _errs12){if(data5 && typeof data5 == "object" && !Array.isArray(data5)){if(data5.transcode === undefined || data5.transcode === null || data5.transcode === ""){data5.transcode = "wss://transcode.ficlab.com/1";}if(data5.archive === undefined || data5.archive === null || data5.archive === ""){data5.archive = "wss://archive.l.ficlab.com:4443/v1";}let missing1;if((data5.transcode === undefined) && (missing1 = "transcode")){validate31.errors = [{instancePath:instancePath+"/services",schemaPath:"#/properties/services/required",keyword:"required",params:{missingProperty: missing1},message:"must have required property '"+missing1+"'"}];return false;}else {const _errs14 = errors;for(const key1 in data5){if(!((key1 === "transcode") || (key1 === "archive"))){delete data5[key1];}}if(_errs14 === errors){let data6 = data5.transcode;const _errs15 = errors;if(typeof data6 !== "string"){let dataType5 = typeof data6;let coerced5 = undefined;if(!(coerced5 !== undefined)){if(dataType5 == "number" || dataType5 == "boolean"){coerced5 = "" + data6;}else if(data6 === null){coerced5 = "";}else {validate31.errors = [{instancePath:instancePath+"/services/transcode",schemaPath:"#/properties/services/properties/transcode/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced5 !== undefined){data6 = coerced5;if(data5 !== undefined){data5["transcode"] = coerced5;}}}var valid1 = _errs15 === errors;if(valid1){let data7 = data5.archive;const _errs17 = errors;if(typeof data7 !== "string"){let dataType6 = typeof data7;let coerced6 = undefined;if(!(coerced6 !== undefined)){if(dataType6 == "number" || dataType6 == "boolean"){coerced6 = "" + data7;}else if(data7 === null){coerced6 = "";}else {validate31.errors = [{instancePath:instancePath+"/services/archive",schemaPath:"#/properties/services/properties/archive/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced6 !== undefined){data7 = coerced6;if(data5 !== undefined){data5["archive"] = coerced6;}}}var valid1 = _errs17 === errors;}}}}else {validate31.errors = [{instancePath:instancePath+"/services",schemaPath:"#/properties/services/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs12 === errors;if(valid0){let data8 = data.cover;const _errs19 = errors;if(errors === _errs19){if(data8 && typeof data8 == "object" && !Array.isArray(data8)){if(data8.scheme === undefined || data8.scheme === null || data8.scheme === ""){data8.scheme = "auto";}if(data8.crop === undefined || data8.crop === null || data8.crop === ""){data8.crop = "auto";}if(data8.dark === undefined || data8.dark === null || data8.dark === ""){data8.dark = false;}if(data8.logo === undefined || data8.logo === null || data8.logo === ""){data8.logo = true;}if(data8.title === undefined || data8.title === null || data8.title === ""){data8.title = true;}if(data8.enable === undefined || data8.enable === null || data8.enable === ""){data8.enable = true;}if(data8.custom === undefined || data8.custom === null || data8.custom === ""){data8.custom = "";}let missing2;if((((((((data8.scheme === undefined) && (missing2 = "scheme")) || ((data8.crop === undefined) && (missing2 = "crop"))) || ((data8.dark === undefined) && (missing2 = "dark"))) || ((data8.logo === undefined) && (missing2 = "logo"))) || ((data8.title === undefined) && (missing2 = "title"))) || ((data8.enable === undefined) && (missing2 = "enable"))) || ((data8.custom === undefined) && (missing2 = "custom"))){validate31.errors = [{instancePath:instancePath+"/cover",schemaPath:"#/properties/cover/required",keyword:"required",params:{missingProperty: missing2},message:"must have required property '"+missing2+"'"}];return false;}else {const _errs21 = errors;for(const key2 in data8){if(!(((((((key2 === "scheme") || (key2 === "crop")) || (key2 === "dark")) || (key2 === "logo")) || (key2 === "title")) || (key2 === "enable")) || (key2 === "custom"))){delete data8[key2];}}if(_errs21 === errors){let data9 = data8.scheme;const _errs22 = errors;if(typeof data9 !== "string"){let dataType7 = typeof data9;let coerced7 = undefined;if(!(coerced7 !== undefined)){if(dataType7 == "number" || dataType7 == "boolean"){coerced7 = "" + data9;}else if(data9 === null){coerced7 = "";}else {validate31.errors = [{instancePath:instancePath+"/cover/scheme",schemaPath:"#/properties/cover/properties/scheme/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced7 !== undefined){data9 = coerced7;if(data8 !== undefined){data8["scheme"] = coerced7;}}}if(!((((((((((((data9 === "auto") || (data9 === "red")) || (data9 === "orange")) || (data9 === "yellow")) || (data9 === "green")) || (data9 === "blue")) || (data9 === "purple")) || (data9 === "pink")) || (data9 === "brown")) || (data9 === "grey")) || (data9 === "black")) || (data9 === "clear"))){validate31.errors = [{instancePath:instancePath+"/cover/scheme",schemaPath:"#/properties/cover/properties/scheme/enum",keyword:"enum",params:{allowedValues: schema43.properties.cover.properties.scheme.enum},message:"must be equal to one of the allowed values"}];return false;}var valid2 = _errs22 === errors;if(valid2){let data10 = data8.crop;const _errs24 = errors;if(typeof data10 !== "string"){let dataType8 = typeof data10;let coerced8 = undefined;if(!(coerced8 !== undefined)){if(dataType8 == "number" || dataType8 == "boolean"){coerced8 = "" + data10;}else if(data10 === null){coerced8 = "";}else {validate31.errors = [{instancePath:instancePath+"/cover/crop",schemaPath:"#/properties/cover/properties/crop/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced8 !== undefined){data10 = coerced8;if(data8 !== undefined){data8["crop"] = coerced8;}}}if(!((((data10 === "auto") || (data10 === "on")) || (data10 === "off")) || (data10 === "fill"))){validate31.errors = [{instancePath:instancePath+"/cover/crop",schemaPath:"#/properties/cover/properties/crop/enum",keyword:"enum",params:{allowedValues: schema43.properties.cover.properties.crop.enum},message:"must be equal to one of the allowed values"}];return false;}var valid2 = _errs24 === errors;if(valid2){let data11 = data8.dark;const _errs26 = errors;if(typeof data11 !== "boolean"){let coerced9 = undefined;if(!(coerced9 !== undefined)){if(data11 === "false" || data11 === 0 || data11 === null){coerced9 = false;}else if(data11 === "true" || data11 === 1){coerced9 = true;}else {validate31.errors = [{instancePath:instancePath+"/cover/dark",schemaPath:"#/properties/cover/properties/dark/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced9 !== undefined){data11 = coerced9;if(data8 !== undefined){data8["dark"] = coerced9;}}}var valid2 = _errs26 === errors;if(valid2){let data12 = data8.logo;const _errs28 = errors;if(typeof data12 !== "boolean"){let coerced10 = undefined;if(!(coerced10 !== undefined)){if(data12 === "false" || data12 === 0 || data12 === null){coerced10 = false;}else if(data12 === "true" || data12 === 1){coerced10 = true;}else {validate31.errors = [{instancePath:instancePath+"/cover/logo",schemaPath:"#/properties/cover/properties/logo/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced10 !== undefined){data12 = coerced10;if(data8 !== undefined){data8["logo"] = coerced10;}}}var valid2 = _errs28 === errors;if(valid2){let data13 = data8.title;const _errs30 = errors;if(typeof data13 !== "boolean"){let coerced11 = undefined;if(!(coerced11 !== undefined)){if(data13 === "false" || data13 === 0 || data13 === null){coerced11 = false;}else if(data13 === "true" || data13 === 1){coerced11 = true;}else {validate31.errors = [{instancePath:instancePath+"/cover/title",schemaPath:"#/properties/cover/properties/title/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced11 !== undefined){data13 = coerced11;if(data8 !== undefined){data8["title"] = coerced11;}}}var valid2 = _errs30 === errors;if(valid2){let data14 = data8.enable;const _errs32 = errors;if(typeof data14 !== "boolean"){let coerced12 = undefined;if(!(coerced12 !== undefined)){if(data14 === "false" || data14 === 0 || data14 === null){coerced12 = false;}else if(data14 === "true" || data14 === 1){coerced12 = true;}else {validate31.errors = [{instancePath:instancePath+"/cover/enable",schemaPath:"#/properties/cover/properties/enable/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced12 !== undefined){data14 = coerced12;if(data8 !== undefined){data8["enable"] = coerced12;}}}var valid2 = _errs32 === errors;if(valid2){let data15 = data8.custom;const _errs34 = errors;if(typeof data15 !== "string"){let dataType13 = typeof data15;let coerced13 = undefined;if(!(coerced13 !== undefined)){if(dataType13 == "number" || dataType13 == "boolean"){coerced13 = "" + data15;}else if(data15 === null){coerced13 = "";}else {validate31.errors = [{instancePath:instancePath+"/cover/custom",schemaPath:"#/properties/cover/properties/custom/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced13 !== undefined){data15 = coerced13;if(data8 !== undefined){data8["custom"] = coerced13;}}}var valid2 = _errs34 === errors;}}}}}}}}}else {validate31.errors = [{instancePath:instancePath+"/cover",schemaPath:"#/properties/cover/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs19 === errors;if(valid0){let data16 = data.book;const _errs36 = errors;if(errors === _errs36){if(data16 && typeof data16 == "object" && !Array.isArray(data16)){if(data16.tags === undefined || data16.tags === null || data16.tags === ""){data16.tags = [];}if(data16.status === undefined || data16.status === null || data16.status === ""){data16.status = "auto";}if(data16.numbers === undefined || data16.numbers === null || data16.numbers === ""){data16.numbers = "auto";}if(data16.paragraph === undefined || data16.paragraph === null || data16.paragraph === ""){data16.paragraph = "space+indent";}if(data16.font === undefined || data16.font === null || data16.font === ""){data16.font = "serif";}if(data16.size === undefined || data16.size === null || data16.size === ""){data16.size = 1;}if(data16.summary === undefined || data16.summary === null || data16.summary === ""){data16.summary = "";}if(data16.cleanPunctuation === undefined || data16.cleanPunctuation === null || data16.cleanPunctuation === ""){data16.cleanPunctuation = true;}if(data16.smartQuotes === undefined || data16.smartQuotes === null || data16.smartQuotes === ""){data16.smartQuotes = true;}if(data16.stripBreaks === undefined || data16.stripBreaks === null || data16.stripBreaks === ""){data16.stripBreaks = false;}if(data16.detectBreaks === undefined || data16.detectBreaks === null || data16.detectBreaks === ""){data16.detectBreaks = true;}if(data16.matchBreaks === undefined || data16.matchBreaks === null || data16.matchBreaks === ""){data16.matchBreaks = "";}let missing3;if(((((((((((((data16.tags === undefined) && (missing3 = "tags")) || ((data16.status === undefined) && (missing3 = "status"))) || ((data16.numbers === undefined) && (missing3 = "numbers"))) || ((data16.paragraph === undefined) && (missing3 = "paragraph"))) || ((data16.font === undefined) && (missing3 = "font"))) || ((data16.size === undefined) && (missing3 = "size"))) || ((data16.summary === undefined) && (missing3 = "summary"))) || ((data16.cleanPunctuation === undefined) && (missing3 = "cleanPunctuation"))) || ((data16.smartQuotes === undefined) && (missing3 = "smartQuotes"))) || ((data16.stripBreaks === undefined) && (missing3 = "stripBreaks"))) || ((data16.detectBreaks === undefined) && (missing3 = "detectBreaks"))) || ((data16.matchBreaks === undefined) && (missing3 = "matchBreaks"))){validate31.errors = [{instancePath:instancePath+"/book",schemaPath:"#/properties/book/required",keyword:"required",params:{missingProperty: missing3},message:"must have required property '"+missing3+"'"}];return false;}else {const _errs38 = errors;for(const key3 in data16){if(!(func7.call(schema43.properties.book.properties, key3))){delete data16[key3];}}if(_errs38 === errors){let data17 = data16.tags;const _errs39 = errors;if(errors === _errs39){if(Array.isArray(data17)){var valid4 = true;const len0 = data17.length;for(let i0=0; i0<len0; i0++){let data18 = data17[i0];const _errs41 = errors;if(typeof data18 !== "string"){let dataType14 = typeof data18;let coerced14 = undefined;if(!(coerced14 !== undefined)){if(dataType14 == "number" || dataType14 == "boolean"){coerced14 = "" + data18;}else if(data18 === null){coerced14 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/tags/" + i0,schemaPath:"#/properties/book/properties/tags/items/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced14 !== undefined){data18 = coerced14;if(data17 !== undefined){data17[i0] = coerced14;}}}if(errors === _errs41){if(typeof data18 === "string"){if(func12(data18) < 1){validate31.errors = [{instancePath:instancePath+"/book/tags/" + i0,schemaPath:"#/properties/book/properties/tags/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}}}var valid4 = _errs41 === errors;if(!valid4){break;}}}else {validate31.errors = [{instancePath:instancePath+"/book/tags",schemaPath:"#/properties/book/properties/tags/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid3 = _errs39 === errors;if(valid3){let data19 = data16.status;const _errs43 = errors;if(typeof data19 !== "string"){let dataType15 = typeof data19;let coerced15 = undefined;if(!(coerced15 !== undefined)){if(dataType15 == "number" || dataType15 == "boolean"){coerced15 = "" + data19;}else if(data19 === null){coerced15 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/status",schemaPath:"#/properties/book/properties/status/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced15 !== undefined){data19 = coerced15;if(data16 !== undefined){data16["status"] = coerced15;}}}if(!(((((data19 === "auto") || (data19 === "complete")) || (data19 === "in-progress")) || (data19 === "hiatus")) || (data19 === "abandoned"))){validate31.errors = [{instancePath:instancePath+"/book/status",schemaPath:"#/properties/book/properties/status/enum",keyword:"enum",params:{allowedValues: schema43.properties.book.properties.status.enum},message:"must be equal to one of the allowed values"}];return false;}var valid3 = _errs43 === errors;if(valid3){let data20 = data16.numbers;const _errs45 = errors;if(typeof data20 !== "string"){let dataType16 = typeof data20;let coerced16 = undefined;if(!(coerced16 !== undefined)){if(dataType16 == "number" || dataType16 == "boolean"){coerced16 = "" + data20;}else if(data20 === null){coerced16 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/numbers",schemaPath:"#/properties/book/properties/numbers/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced16 !== undefined){data20 = coerced16;if(data16 !== undefined){data16["numbers"] = coerced16;}}}if(!(((data20 === "auto") || (data20 === "on")) || (data20 === "off"))){validate31.errors = [{instancePath:instancePath+"/book/numbers",schemaPath:"#/properties/book/properties/numbers/enum",keyword:"enum",params:{allowedValues: schema43.properties.book.properties.numbers.enum},message:"must be equal to one of the allowed values"}];return false;}var valid3 = _errs45 === errors;if(valid3){let data21 = data16.paragraph;const _errs47 = errors;if(typeof data21 !== "string"){let dataType17 = typeof data21;let coerced17 = undefined;if(!(coerced17 !== undefined)){if(dataType17 == "number" || dataType17 == "boolean"){coerced17 = "" + data21;}else if(data21 === null){coerced17 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/paragraph",schemaPath:"#/properties/book/properties/paragraph/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced17 !== undefined){data21 = coerced17;if(data16 !== undefined){data16["paragraph"] = coerced17;}}}if(!(((data21 === "space+indent") || (data21 === "space")) || (data21 === "indent"))){validate31.errors = [{instancePath:instancePath+"/book/paragraph",schemaPath:"#/properties/book/properties/paragraph/enum",keyword:"enum",params:{allowedValues: schema43.properties.book.properties.paragraph.enum},message:"must be equal to one of the allowed values"}];return false;}var valid3 = _errs47 === errors;if(valid3){let data22 = data16.font;const _errs49 = errors;if(typeof data22 !== "string"){let dataType18 = typeof data22;let coerced18 = undefined;if(!(coerced18 !== undefined)){if(dataType18 == "number" || dataType18 == "boolean"){coerced18 = "" + data22;}else if(data22 === null){coerced18 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/font",schemaPath:"#/properties/book/properties/font/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced18 !== undefined){data22 = coerced18;if(data16 !== undefined){data16["font"] = coerced18;}}}if(!((data22 === "serif") || (data22 === "sans-serif"))){validate31.errors = [{instancePath:instancePath+"/book/font",schemaPath:"#/properties/book/properties/font/enum",keyword:"enum",params:{allowedValues: schema43.properties.book.properties.font.enum},message:"must be equal to one of the allowed values"}];return false;}var valid3 = _errs49 === errors;if(valid3){let data23 = data16.size;const _errs51 = errors;if(!((typeof data23 == "number") && (isFinite(data23)))){let dataType19 = typeof data23;let coerced19 = undefined;if(!(coerced19 !== undefined)){if(dataType19 == "boolean" || data23 === null
              || (dataType19 == "string" && data23 && data23 == +data23)){coerced19 = +data23;}else {validate31.errors = [{instancePath:instancePath+"/book/size",schemaPath:"#/properties/book/properties/size/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced19 !== undefined){data23 = coerced19;if(data16 !== undefined){data16["size"] = coerced19;}}}var valid3 = _errs51 === errors;if(valid3){let data24 = data16.summary;const _errs53 = errors;if(typeof data24 !== "string"){let dataType20 = typeof data24;let coerced20 = undefined;if(!(coerced20 !== undefined)){if(dataType20 == "number" || dataType20 == "boolean"){coerced20 = "" + data24;}else if(data24 === null){coerced20 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/summary",schemaPath:"#/properties/book/properties/summary/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced20 !== undefined){data24 = coerced20;if(data16 !== undefined){data16["summary"] = coerced20;}}}var valid3 = _errs53 === errors;if(valid3){let data25 = data16.cleanPunctuation;const _errs55 = errors;if(typeof data25 !== "boolean"){let coerced21 = undefined;if(!(coerced21 !== undefined)){if(data25 === "false" || data25 === 0 || data25 === null){coerced21 = false;}else if(data25 === "true" || data25 === 1){coerced21 = true;}else {validate31.errors = [{instancePath:instancePath+"/book/cleanPunctuation",schemaPath:"#/properties/book/properties/cleanPunctuation/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced21 !== undefined){data25 = coerced21;if(data16 !== undefined){data16["cleanPunctuation"] = coerced21;}}}var valid3 = _errs55 === errors;if(valid3){let data26 = data16.smartQuotes;const _errs57 = errors;if(typeof data26 !== "boolean"){let coerced22 = undefined;if(!(coerced22 !== undefined)){if(data26 === "false" || data26 === 0 || data26 === null){coerced22 = false;}else if(data26 === "true" || data26 === 1){coerced22 = true;}else {validate31.errors = [{instancePath:instancePath+"/book/smartQuotes",schemaPath:"#/properties/book/properties/smartQuotes/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced22 !== undefined){data26 = coerced22;if(data16 !== undefined){data16["smartQuotes"] = coerced22;}}}var valid3 = _errs57 === errors;if(valid3){let data27 = data16.stripBreaks;const _errs59 = errors;if(typeof data27 !== "boolean"){let coerced23 = undefined;if(!(coerced23 !== undefined)){if(data27 === "false" || data27 === 0 || data27 === null){coerced23 = false;}else if(data27 === "true" || data27 === 1){coerced23 = true;}else {validate31.errors = [{instancePath:instancePath+"/book/stripBreaks",schemaPath:"#/properties/book/properties/stripBreaks/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced23 !== undefined){data27 = coerced23;if(data16 !== undefined){data16["stripBreaks"] = coerced23;}}}var valid3 = _errs59 === errors;if(valid3){let data28 = data16.detectBreaks;const _errs61 = errors;if(typeof data28 !== "boolean"){let coerced24 = undefined;if(!(coerced24 !== undefined)){if(data28 === "false" || data28 === 0 || data28 === null){coerced24 = false;}else if(data28 === "true" || data28 === 1){coerced24 = true;}else {validate31.errors = [{instancePath:instancePath+"/book/detectBreaks",schemaPath:"#/properties/book/properties/detectBreaks/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced24 !== undefined){data28 = coerced24;if(data16 !== undefined){data16["detectBreaks"] = coerced24;}}}var valid3 = _errs61 === errors;if(valid3){let data29 = data16.matchBreaks;const _errs63 = errors;if(typeof data29 !== "string"){let dataType25 = typeof data29;let coerced25 = undefined;if(!(coerced25 !== undefined)){if(dataType25 == "number" || dataType25 == "boolean"){coerced25 = "" + data29;}else if(data29 === null){coerced25 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/matchBreaks",schemaPath:"#/properties/book/properties/matchBreaks/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced25 !== undefined){data29 = coerced25;if(data16 !== undefined){data16["matchBreaks"] = coerced25;}}}var valid3 = _errs63 === errors;}}}}}}}}}}}}}}else {validate31.errors = [{instancePath:instancePath+"/book",schemaPath:"#/properties/book/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs36 === errors;if(valid0){let data30 = data.misc;const _errs65 = errors;if(errors === _errs65){if(data30 && typeof data30 == "object" && !Array.isArray(data30)){if(data30.abandonAfter === undefined || data30.abandonAfter === null || data30.abandonAfter === ""){data30.abandonAfter = 31557600;}let missing4;if((data30.abandonAfter === undefined) && (missing4 = "abandonAfter")){validate31.errors = [{instancePath:instancePath+"/misc",schemaPath:"#/properties/misc/required",keyword:"required",params:{missingProperty: missing4},message:"must have required property '"+missing4+"'"}];return false;}else {const _errs67 = errors;for(const key4 in data30){if(!(key4 === "abandonAfter")){delete data30[key4];}}if(_errs67 === errors){let data31 = data30.abandonAfter;const _errs68 = errors;if(!(((typeof data31 == "number") && (!(data31 % 1) && !isNaN(data31))) && (isFinite(data31)))){let dataType26 = typeof data31;let coerced26 = undefined;if(!(coerced26 !== undefined)){if(dataType26 === "boolean" || data31 === null
              || (dataType26 === "string" && data31 && data31 == +data31 && !(data31 % 1))){coerced26 = +data31;}else {validate31.errors = [{instancePath:instancePath+"/misc/abandonAfter",schemaPath:"#/properties/misc/properties/abandonAfter/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced26 !== undefined){data31 = coerced26;if(data30 !== undefined){data30["abandonAfter"] = coerced26;}}}if(errors === _errs68){if((typeof data31 == "number") && (isFinite(data31))){if(data31 < 0 || isNaN(data31)){validate31.errors = [{instancePath:instancePath+"/misc/abandonAfter",schemaPath:"#/properties/misc/properties/abandonAfter/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}}}}else {validate31.errors = [{instancePath:instancePath+"/misc",schemaPath:"#/properties/misc/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs65 === errors;if(valid0){let data32 = data.tweaks;const _errs70 = errors;if(errors === _errs70){if(data32 && typeof data32 == "object" && !Array.isArray(data32)){if(data32.delayFactor === undefined || data32.delayFactor === null || data32.delayFactor === ""){data32.delayFactor = 0.05;}if(data32.maxDelay === undefined || data32.maxDelay === null || data32.maxDelay === ""){data32.maxDelay = 20;}if(data32.backoff === undefined || data32.backoff === null || data32.backoff === ""){data32.backoff = 1.5;}if(data32.pause === undefined || data32.pause === null || data32.pause === ""){data32.pause = 10;}if(data32.bucketSize === undefined || data32.bucketSize === null || data32.bucketSize === ""){data32.bucketSize = 20;}if(data32.bucketRate === undefined || data32.bucketRate === null || data32.bucketRate === ""){data32.bucketRate = 2;}if(data32.disable === undefined || data32.disable === null || data32.disable === ""){data32.disable = "";}if(data32.warning === undefined || data32.warning === null || data32.warning === ""){data32.warning = "";}if(data32.gatherRecent === undefined || data32.gatherRecent === null || data32.gatherRecent === ""){data32.gatherRecent = 0;}let missing5;if(((((((data32.delayFactor === undefined) && (missing5 = "delayFactor")) || ((data32.backoff === undefined) && (missing5 = "backoff"))) || ((data32.pause === undefined) && (missing5 = "pause"))) || ((data32.bucketSize === undefined) && (missing5 = "bucketSize"))) || ((data32.bucketRate === undefined) && (missing5 = "bucketRate"))) || ((data32.disable === undefined) && (missing5 = "disable"))){validate31.errors = [{instancePath:instancePath+"/tweaks",schemaPath:"#/properties/tweaks/required",keyword:"required",params:{missingProperty: missing5},message:"must have required property '"+missing5+"'"}];return false;}else {const _errs72 = errors;for(const key5 in data32){if(!(func7.call(schema43.properties.tweaks.properties, key5))){delete data32[key5];}}if(_errs72 === errors){let data33 = data32.delayFactor;const _errs73 = errors;if(!((typeof data33 == "number") && (isFinite(data33)))){let dataType27 = typeof data33;let coerced27 = undefined;if(!(coerced27 !== undefined)){if(dataType27 == "boolean" || data33 === null
              || (dataType27 == "string" && data33 && data33 == +data33)){coerced27 = +data33;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/delayFactor",schemaPath:"#/properties/tweaks/properties/delayFactor/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced27 !== undefined){data33 = coerced27;if(data32 !== undefined){data32["delayFactor"] = coerced27;}}}if(errors === _errs73){if((typeof data33 == "number") && (isFinite(data33))){if(data33 < 0 || isNaN(data33)){validate31.errors = [{instancePath:instancePath+"/tweaks/delayFactor",schemaPath:"#/properties/tweaks/properties/delayFactor/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}var valid6 = _errs73 === errors;if(valid6){let data34 = data32.maxDelay;const _errs75 = errors;if(!((typeof data34 == "number") && (isFinite(data34)))){let dataType28 = typeof data34;let coerced28 = undefined;if(!(coerced28 !== undefined)){if(dataType28 == "boolean" || data34 === null
              || (dataType28 == "string" && data34 && data34 == +data34)){coerced28 = +data34;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/maxDelay",schemaPath:"#/properties/tweaks/properties/maxDelay/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced28 !== undefined){data34 = coerced28;if(data32 !== undefined){data32["maxDelay"] = coerced28;}}}if(errors === _errs75){if((typeof data34 == "number") && (isFinite(data34))){if(data34 < 0 || isNaN(data34)){validate31.errors = [{instancePath:instancePath+"/tweaks/maxDelay",schemaPath:"#/properties/tweaks/properties/maxDelay/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}var valid6 = _errs75 === errors;if(valid6){let data35 = data32.backoff;const _errs77 = errors;if(!((typeof data35 == "number") && (isFinite(data35)))){let dataType29 = typeof data35;let coerced29 = undefined;if(!(coerced29 !== undefined)){if(dataType29 == "boolean" || data35 === null
              || (dataType29 == "string" && data35 && data35 == +data35)){coerced29 = +data35;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/backoff",schemaPath:"#/properties/tweaks/properties/backoff/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced29 !== undefined){data35 = coerced29;if(data32 !== undefined){data32["backoff"] = coerced29;}}}if(errors === _errs77){if((typeof data35 == "number") && (isFinite(data35))){if(data35 < 1 || isNaN(data35)){validate31.errors = [{instancePath:instancePath+"/tweaks/backoff",schemaPath:"#/properties/tweaks/properties/backoff/minimum",keyword:"minimum",params:{comparison: ">=", limit: 1},message:"must be >= 1"}];return false;}}}var valid6 = _errs77 === errors;if(valid6){let data36 = data32.pause;const _errs79 = errors;if(!((typeof data36 == "number") && (isFinite(data36)))){let dataType30 = typeof data36;let coerced30 = undefined;if(!(coerced30 !== undefined)){if(dataType30 == "boolean" || data36 === null
              || (dataType30 == "string" && data36 && data36 == +data36)){coerced30 = +data36;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/pause",schemaPath:"#/properties/tweaks/properties/pause/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced30 !== undefined){data36 = coerced30;if(data32 !== undefined){data32["pause"] = coerced30;}}}if(errors === _errs79){if((typeof data36 == "number") && (isFinite(data36))){if(data36 < 0 || isNaN(data36)){validate31.errors = [{instancePath:instancePath+"/tweaks/pause",schemaPath:"#/properties/tweaks/properties/pause/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}var valid6 = _errs79 === errors;if(valid6){let data37 = data32.bucketSize;const _errs81 = errors;if(!((typeof data37 == "number") && (isFinite(data37)))){let dataType31 = typeof data37;let coerced31 = undefined;if(!(coerced31 !== undefined)){if(dataType31 == "boolean" || data37 === null
              || (dataType31 == "string" && data37 && data37 == +data37)){coerced31 = +data37;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/bucketSize",schemaPath:"#/properties/tweaks/properties/bucketSize/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced31 !== undefined){data37 = coerced31;if(data32 !== undefined){data32["bucketSize"] = coerced31;}}}if(errors === _errs81){if((typeof data37 == "number") && (isFinite(data37))){if(data37 < 0 || isNaN(data37)){validate31.errors = [{instancePath:instancePath+"/tweaks/bucketSize",schemaPath:"#/properties/tweaks/properties/bucketSize/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}var valid6 = _errs81 === errors;if(valid6){let data38 = data32.bucketRate;const _errs83 = errors;if(!((typeof data38 == "number") && (isFinite(data38)))){let dataType32 = typeof data38;let coerced32 = undefined;if(!(coerced32 !== undefined)){if(dataType32 == "boolean" || data38 === null
              || (dataType32 == "string" && data38 && data38 == +data38)){coerced32 = +data38;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/bucketRate",schemaPath:"#/properties/tweaks/properties/bucketRate/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced32 !== undefined){data38 = coerced32;if(data32 !== undefined){data32["bucketRate"] = coerced32;}}}if(errors === _errs83){if((typeof data38 == "number") && (isFinite(data38))){if(data38 < 0 || isNaN(data38)){validate31.errors = [{instancePath:instancePath+"/tweaks/bucketRate",schemaPath:"#/properties/tweaks/properties/bucketRate/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}var valid6 = _errs83 === errors;if(valid6){let data39 = data32.disable;const _errs85 = errors;if(typeof data39 !== "string"){let dataType33 = typeof data39;let coerced33 = undefined;if(!(coerced33 !== undefined)){if(dataType33 == "number" || dataType33 == "boolean"){coerced33 = "" + data39;}else if(data39 === null){coerced33 = "";}else {validate31.errors = [{instancePath:instancePath+"/tweaks/disable",schemaPath:"#/properties/tweaks/properties/disable/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced33 !== undefined){data39 = coerced33;if(data32 !== undefined){data32["disable"] = coerced33;}}}var valid6 = _errs85 === errors;if(valid6){let data40 = data32.warning;const _errs87 = errors;if(typeof data40 !== "string"){let dataType34 = typeof data40;let coerced34 = undefined;if(!(coerced34 !== undefined)){if(dataType34 == "number" || dataType34 == "boolean"){coerced34 = "" + data40;}else if(data40 === null){coerced34 = "";}else {validate31.errors = [{instancePath:instancePath+"/tweaks/warning",schemaPath:"#/properties/tweaks/properties/warning/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced34 !== undefined){data40 = coerced34;if(data32 !== undefined){data32["warning"] = coerced34;}}}var valid6 = _errs87 === errors;if(valid6){let data41 = data32.gatherRecent;const _errs89 = errors;if(!(((typeof data41 == "number") && (!(data41 % 1) && !isNaN(data41))) && (isFinite(data41)))){let dataType35 = typeof data41;let coerced35 = undefined;if(!(coerced35 !== undefined)){if(dataType35 === "boolean" || data41 === null
              || (dataType35 === "string" && data41 && data41 == +data41 && !(data41 % 1))){coerced35 = +data41;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/gatherRecent",schemaPath:"#/properties/tweaks/properties/gatherRecent/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced35 !== undefined){data41 = coerced35;if(data32 !== undefined){data32["gatherRecent"] = coerced35;}}}var valid6 = _errs89 === errors;}}}}}}}}}}}else {validate31.errors = [{instancePath:instancePath+"/tweaks",schemaPath:"#/properties/tweaks/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs70 === errors;if(valid0){let data42 = data.flags;const _errs91 = errors;if(errors === _errs91){if(data42 && typeof data42 == "object" && !Array.isArray(data42)){if(data42.debugDetectBreaks === undefined || data42.debugDetectBreaks === null || data42.debugDetectBreaks === ""){data42.debugDetectBreaks = false;}let missing6;if((data42.debugDetectBreaks === undefined) && (missing6 = "debugDetectBreaks")){validate31.errors = [{instancePath:instancePath+"/flags",schemaPath:"#/properties/flags/required",keyword:"required",params:{missingProperty: missing6},message:"must have required property '"+missing6+"'"}];return false;}else {const _errs93 = errors;for(const key6 in data42){if(!(key6 === "debugDetectBreaks")){delete data42[key6];}}if(_errs93 === errors){let data43 = data42.debugDetectBreaks;if(typeof data43 !== "boolean"){let coerced36 = undefined;if(!(coerced36 !== undefined)){if(data43 === "false" || data43 === 0 || data43 === null){coerced36 = false;}else if(data43 === "true" || data43 === 1){coerced36 = true;}else {validate31.errors = [{instancePath:instancePath+"/flags/debugDetectBreaks",schemaPath:"#/$defs/flag/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced36 !== undefined){data43 = coerced36;if(data42 !== undefined){data42["debugDetectBreaks"] = coerced36;}}}}}}else {validate31.errors = [{instancePath:instancePath+"/flags",schemaPath:"#/properties/flags/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs91 === errors;}}}}}}}}}}}}}else {validate31.errors = [{instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}validate31.errors = vErrors;return errors === 0;}validate31.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const formats0 = require("ajv-formats/dist/formats").fullFormats.uri;const formats2 = require("ajv-formats/dist/formats").fullFormats.regex;function validate30(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="provision" */;let vErrors = null;let errors = 0;const evaluated0 = validate30.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(errors === 0){if(data && typeof data == "object" && !Array.isArray(data)){if(data.internal === undefined || data.internal === null || data.internal === ""){data.internal = false;}if(data.default === undefined || data.default === null || data.default === ""){data.default = {};}if(data.tosEpoch === undefined || data.tosEpoch === null || data.tosEpoch === ""){data.tosEpoch = 0;}if(data.userSettingsEpoch === undefined || data.userSettingsEpoch === null || data.userSettingsEpoch === ""){data.userSettingsEpoch = 0;}if(data.userSettingsOverride === undefined || data.userSettingsOverride === null || data.userSettingsOverride === ""){data.userSettingsOverride = [];}let missing0;if((((data.internal === undefined) && (missing0 = "internal")) || ((data.default === undefined) && (missing0 = "default"))) || ((data.userSettingsEpoch === undefined) && (missing0 = "userSettingsEpoch"))){validate30.errors = [{instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: missing0},message:"must have required property '"+missing0+"'"}];return false;}else {const _errs1 = errors;for(const key0 in data){if(!(((((((key0 === "internal") || (key0 === "v0")) || (key0 === "default")) || (key0 === "analysis")) || (key0 === "tosEpoch")) || (key0 === "userSettingsEpoch")) || (key0 === "userSettingsOverride"))){delete data[key0];}}if(_errs1 === errors){let data0 = data.internal;const _errs2 = errors;if(typeof data0 !== "boolean"){let coerced0 = undefined;if(!(coerced0 !== undefined)){if(data0 === "false" || data0 === 0 || data0 === null){coerced0 = false;}else if(data0 === "true" || data0 === 1){coerced0 = true;}else {validate30.errors = [{instancePath:instancePath+"/internal",schemaPath:"#/properties/internal/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced0 !== undefined){data0 = coerced0;if(data !== undefined){data["internal"] = coerced0;}}}var valid0 = _errs2 === errors;if(valid0){if(data.v0 !== undefined){let data1 = data.v0;const _errs4 = errors;if(errors === _errs4){if(data1 && typeof data1 == "object" && !Array.isArray(data1)){if(data1["ffnet-delay-factor"] === undefined || data1["ffnet-delay-factor"] === null || data1["ffnet-delay-factor"] === ""){data1["ffnet-delay-factor"] = 1;}const _errs6 = errors;for(const key1 in data1){if(!(key1 === "ffnet-delay-factor")){delete data1[key1];}}if(_errs6 === errors){let data2 = data1["ffnet-delay-factor"];if(!((typeof data2 == "number") && (isFinite(data2)))){let dataType1 = typeof data2;let coerced1 = undefined;if(!(coerced1 !== undefined)){if(dataType1 == "boolean" || data2 === null
              || (dataType1 == "string" && data2 && data2 == +data2)){coerced1 = +data2;}else {validate30.errors = [{instancePath:instancePath+"/v0/ffnet-delay-factor",schemaPath:"#/properties/v0/properties/ffnet-delay-factor/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced1 !== undefined){data2 = coerced1;if(data1 !== undefined){data1["ffnet-delay-factor"] = coerced1;}}}}}else {validate30.errors = [{instancePath:instancePath+"/v0",schemaPath:"#/properties/v0/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs4 === errors;}else {var valid0 = true;}if(valid0){const _errs9 = errors;if(!(validate31(data.default, {instancePath:instancePath+"/default",parentData:data,parentDataProperty:"default",rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate31.errors : vErrors.concat(validate31.errors);errors = vErrors.length;}var valid0 = _errs9 === errors;if(valid0){if(data.analysis !== undefined){let data4 = data.analysis;const _errs10 = errors;if(typeof data4 !== "string"){let dataType2 = typeof data4;let coerced2 = undefined;if(!(coerced2 !== undefined)){if(dataType2 == "number" || dataType2 == "boolean"){coerced2 = "" + data4;}else if(data4 === null){coerced2 = "";}else {validate30.errors = [{instancePath:instancePath+"/analysis",schemaPath:"#/properties/analysis/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced2 !== undefined){data4 = coerced2;if(data !== undefined){data["analysis"] = coerced2;}}}if(errors === _errs10){if(errors === _errs10){if(typeof data4 === "string"){if(func12(data4) < 1){validate30.errors = [{instancePath:instancePath+"/analysis",schemaPath:"#/properties/analysis/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}else {if(!(formats0(data4))){validate30.errors = [{instancePath:instancePath+"/analysis",schemaPath:"#/properties/analysis/format",keyword:"format",params:{format: "uri"},message:"must match format \""+"uri"+"\""}];return false;}}}}}var valid0 = _errs10 === errors;}else {var valid0 = true;}if(valid0){let data5 = data.tosEpoch;const _errs12 = errors;if(!(((typeof data5 == "number") && (!(data5 % 1) && !isNaN(data5))) && (isFinite(data5)))){let dataType3 = typeof data5;let coerced3 = undefined;if(!(coerced3 !== undefined)){if(dataType3 === "boolean" || data5 === null
              || (dataType3 === "string" && data5 && data5 == +data5 && !(data5 % 1))){coerced3 = +data5;}else {validate30.errors = [{instancePath:instancePath+"/tosEpoch",schemaPath:"#/properties/tosEpoch/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced3 !== undefined){data5 = coerced3;if(data !== undefined){data["tosEpoch"] = coerced3;}}}var valid0 = _errs12 === errors;if(valid0){let data6 = data.userSettingsEpoch;const _errs14 = errors;if(!(((typeof data6 == "number") && (!(data6 % 1) && !isNaN(data6))) && (isFinite(data6)))){let dataType4 = typeof data6;let coerced4 = undefined;if(!(coerced4 !== undefined)){if(dataType4 === "boolean" || data6 === null
              || (dataType4 === "string" && data6 && data6 == +data6 && !(data6 % 1))){coerced4 = +data6;}else {validate30.errors = [{instancePath:instancePath+"/userSettingsEpoch",schemaPath:"#/properties/userSettingsEpoch/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced4 !== undefined){data6 = coerced4;if(data !== undefined){data["userSettingsEpoch"] = coerced4;}}}var valid0 = _errs14 === errors;if(valid0){let data7 = data.userSettingsOverride;const _errs16 = errors;if(errors === _errs16){if(Array.isArray(data7)){var valid2 = true;const len0 = data7.length;for(let i0=0; i0<len0; i0++){let data8 = data7[i0];const _errs18 = errors;if(errors === _errs18){if(data8 && typeof data8 == "object" && !Array.isArray(data8)){if(data8.from === undefined || data8.from === null || data8.from === ""){data8.from = 0;}if(data8.fromVersion === undefined || data8.fromVersion === null || data8.fromVersion === ""){data8.fromVersion = "";}if(data8.until === undefined || data8.until === null || data8.until === ""){data8.until = 0;}if(data8.untilVersion === undefined || data8.untilVersion === null || data8.untilVersion === ""){data8.untilVersion = "";}if(data8.production === undefined || data8.production === null || data8.production === ""){data8.production = true;}if(data8.origin === undefined || data8.origin === null || data8.origin === ""){data8.origin = [];}if(data8.context === undefined || data8.context === null || data8.context === ""){data8.context = [];}if(data8.id === undefined || data8.id === null || data8.id === ""){data8.id = [];}if(data8.agent === undefined || data8.agent === null || data8.agent === ""){data8.agent = [];}if(data8.set === undefined || data8.set === null || data8.set === ""){data8.set = {};}let missing1;if((((((((((data8.from === undefined) && (missing1 = "from")) || ((data8.fromVersion === undefined) && (missing1 = "fromVersion"))) || ((data8.until === undefined) && (missing1 = "until"))) || ((data8.untilVersion === undefined) && (missing1 = "untilVersion"))) || ((data8.production === undefined) && (missing1 = "production"))) || ((data8.origin === undefined) && (missing1 = "origin"))) || ((data8.context === undefined) && (missing1 = "context"))) || ((data8.id === undefined) && (missing1 = "id"))) || ((data8.set === undefined) && (missing1 = "set"))){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0,schemaPath:"#/properties/userSettingsOverride/items/required",keyword:"required",params:{missingProperty: missing1},message:"must have required property '"+missing1+"'"}];return false;}else {const _errs20 = errors;for(const key2 in data8){if(!(func7.call(schema42.properties.userSettingsOverride.items.properties, key2))){delete data8[key2];}}if(_errs20 === errors){let data9 = data8.from;const _errs21 = errors;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){let dataType5 = typeof data9;let coerced5 = undefined;if(!(coerced5 !== undefined)){if(dataType5 === "boolean" || data9 === null
              || (dataType5 === "string" && data9 && data9 == +data9 && !(data9 % 1))){coerced5 = +data9;}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/from",schemaPath:"#/properties/userSettingsOverride/items/properties/from/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced5 !== undefined){data9 = coerced5;if(data8 !== undefined){data8["from"] = coerced5;}}}var valid3 = _errs21 === errors;if(valid3){let data10 = data8.fromVersion;const _errs23 = errors;if(typeof data10 !== "string"){let dataType6 = typeof data10;let coerced6 = undefined;if(!(coerced6 !== undefined)){if(dataType6 == "number" || dataType6 == "boolean"){coerced6 = "" + data10;}else if(data10 === null){coerced6 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/fromVersion",schemaPath:"#/properties/userSettingsOverride/items/properties/fromVersion/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced6 !== undefined){data10 = coerced6;if(data8 !== undefined){data8["fromVersion"] = coerced6;}}}var valid3 = _errs23 === errors;if(valid3){let data11 = data8.until;const _errs25 = errors;if(!(((typeof data11 == "number") && (!(data11 % 1) && !isNaN(data11))) && (isFinite(data11)))){let dataType7 = typeof data11;let coerced7 = undefined;if(!(coerced7 !== undefined)){if(dataType7 === "boolean" || data11 === null
              || (dataType7 === "string" && data11 && data11 == +data11 && !(data11 % 1))){coerced7 = +data11;}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/until",schemaPath:"#/properties/userSettingsOverride/items/properties/until/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced7 !== undefined){data11 = coerced7;if(data8 !== undefined){data8["until"] = coerced7;}}}var valid3 = _errs25 === errors;if(valid3){let data12 = data8.untilVersion;const _errs27 = errors;if(typeof data12 !== "string"){let dataType8 = typeof data12;let coerced8 = undefined;if(!(coerced8 !== undefined)){if(dataType8 == "number" || dataType8 == "boolean"){coerced8 = "" + data12;}else if(data12 === null){coerced8 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/untilVersion",schemaPath:"#/properties/userSettingsOverride/items/properties/untilVersion/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced8 !== undefined){data12 = coerced8;if(data8 !== undefined){data8["untilVersion"] = coerced8;}}}var valid3 = _errs27 === errors;if(valid3){let data13 = data8.production;const _errs29 = errors;if(typeof data13 !== "boolean"){let coerced9 = undefined;if(!(coerced9 !== undefined)){if(data13 === "false" || data13 === 0 || data13 === null){coerced9 = false;}else if(data13 === "true" || data13 === 1){coerced9 = true;}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/production",schemaPath:"#/properties/userSettingsOverride/items/properties/production/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced9 !== undefined){data13 = coerced9;if(data8 !== undefined){data8["production"] = coerced9;}}}var valid3 = _errs29 === errors;if(valid3){let data14 = data8.origin;const _errs31 = errors;if(errors === _errs31){if(Array.isArray(data14)){var valid4 = true;const len1 = data14.length;for(let i1=0; i1<len1; i1++){let data15 = data14[i1];const _errs33 = errors;if(typeof data15 !== "string"){let dataType10 = typeof data15;let coerced10 = undefined;if(!(coerced10 !== undefined)){if(dataType10 == "number" || dataType10 == "boolean"){coerced10 = "" + data15;}else if(data15 === null){coerced10 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/origin/" + i1,schemaPath:"#/properties/userSettingsOverride/items/properties/origin/items/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced10 !== undefined){data15 = coerced10;if(data14 !== undefined){data14[i1] = coerced10;}}}if(errors === _errs33){if(typeof data15 === "string"){if(func12(data15) < 1){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/origin/" + i1,schemaPath:"#/properties/userSettingsOverride/items/properties/origin/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}}}var valid4 = _errs33 === errors;if(!valid4){break;}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/origin",schemaPath:"#/properties/userSettingsOverride/items/properties/origin/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid3 = _errs31 === errors;if(valid3){let data16 = data8.context;const _errs35 = errors;if(errors === _errs35){if(Array.isArray(data16)){var valid5 = true;const len2 = data16.length;for(let i2=0; i2<len2; i2++){let data17 = data16[i2];const _errs37 = errors;if(typeof data17 !== "string"){let dataType11 = typeof data17;let coerced11 = undefined;if(!(coerced11 !== undefined)){if(dataType11 == "number" || dataType11 == "boolean"){coerced11 = "" + data17;}else if(data17 === null){coerced11 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/context/" + i2,schemaPath:"#/properties/userSettingsOverride/items/properties/context/items/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced11 !== undefined){data17 = coerced11;if(data16 !== undefined){data16[i2] = coerced11;}}}if(errors === _errs37){if(typeof data17 === "string"){if(func12(data17) < 1){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/context/" + i2,schemaPath:"#/properties/userSettingsOverride/items/properties/context/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}}}var valid5 = _errs37 === errors;if(!valid5){break;}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/context",schemaPath:"#/properties/userSettingsOverride/items/properties/context/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid3 = _errs35 === errors;if(valid3){let data18 = data8.id;const _errs39 = errors;if(errors === _errs39){if(Array.isArray(data18)){var valid6 = true;const len3 = data18.length;for(let i3=0; i3<len3; i3++){let data19 = data18[i3];const _errs41 = errors;if(typeof data19 !== "string"){let dataType12 = typeof data19;let coerced12 = undefined;if(!(coerced12 !== undefined)){if(dataType12 == "number" || dataType12 == "boolean"){coerced12 = "" + data19;}else if(data19 === null){coerced12 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/id/" + i3,schemaPath:"#/properties/userSettingsOverride/items/properties/id/items/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced12 !== undefined){data19 = coerced12;if(data18 !== undefined){data18[i3] = coerced12;}}}if(errors === _errs41){if(typeof data19 === "string"){if(func12(data19) < 1){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/id/" + i3,schemaPath:"#/properties/userSettingsOverride/items/properties/id/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}}}var valid6 = _errs41 === errors;if(!valid6){break;}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/id",schemaPath:"#/properties/userSettingsOverride/items/properties/id/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid3 = _errs39 === errors;if(valid3){let data20 = data8.agent;const _errs43 = errors;if(errors === _errs43){if(Array.isArray(data20)){var valid7 = true;const len4 = data20.length;for(let i4=0; i4<len4; i4++){let data21 = data20[i4];const _errs45 = errors;if(typeof data21 !== "string"){let dataType13 = typeof data21;let coerced13 = undefined;if(!(coerced13 !== undefined)){if(dataType13 == "number" || dataType13 == "boolean"){coerced13 = "" + data21;}else if(data21 === null){coerced13 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/agent/" + i4,schemaPath:"#/properties/userSettingsOverride/items/properties/agent/items/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced13 !== undefined){data21 = coerced13;if(data20 !== undefined){data20[i4] = coerced13;}}}if(errors === _errs45){if(errors === _errs45){if(typeof data21 === "string"){if(func12(data21) < 1){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/agent/" + i4,schemaPath:"#/properties/userSettingsOverride/items/properties/agent/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}else {if(!(formats2(data21))){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/agent/" + i4,schemaPath:"#/properties/userSettingsOverride/items/properties/agent/items/format",keyword:"format",params:{format: "regex"},message:"must match format \""+"regex"+"\""}];return false;}}}}}var valid7 = _errs45 === errors;if(!valid7){break;}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/agent",schemaPath:"#/properties/userSettingsOverride/items/properties/agent/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid3 = _errs43 === errors;if(valid3){let data22 = data8.set;const _errs47 = errors;if(!(data22 && typeof data22 == "object" && !Array.isArray(data22))){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/set",schemaPath:"#/properties/userSettingsOverride/items/properties/set/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}var valid3 = _errs47 === errors;}}}}}}}}}}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0,schemaPath:"#/properties/userSettingsOverride/items/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid2 = _errs18 === errors;if(!valid2){break;}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride",schemaPath:"#/properties/userSettingsOverride/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid0 = _errs16 === errors;}}}}}}}}}else {validate30.errors = [{instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}validate30.errors = vErrors;return errors === 0;}validate30.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};