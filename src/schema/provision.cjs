"use strict";module.exports = validate30;module.exports.default = validate30;const schema42 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"provision","type":"object","properties":{"internal":{"type":"boolean","default":false,"description":"True if provisioning failed, and the internal schema values are used"},"retrieved":{"type":"integer","default":0,"description":"Timestamp when the provisioning data was retrieved"},"default":{"$ref":"settings#","default":{},"description":"Default settings"},"tosEpoch":{"type":"integer","default":0,"description":"When the TOS was last updated"},"userSettingsEpoch":{"type":"integer","default":0,"description":"Only allow user settings saved at or after this timestamp"},"userSettingsOverride":{"type":"array","default":[],"description":"Override saved user settings","items":{"type":"object","default":{},"description":"A single override rule","required":["from","fromVersion","until","untilVersion","production","origin","context","id","set"],"properties":{"from":{"type":"integer","default":0,"description":"Apply the rule beginning from this timestamp"},"fromVersion":{"type":"string","default":"","description":"Apply the rule beginning from this version"},"until":{"type":"integer","default":0,"description":"Apply the rule until this timestamp"},"untilVersion":{"type":"string","default":"","description":"Apply the rule until this version"},"production":{"type":"boolean","default":true,"description":"Whether to apply this rule to production"},"origin":{"type":"array","default":[],"description":"List of origins to apply the override for","items":{"type":"string","minLength":1}},"context":{"type":"array","default":[],"description":"List of contexts to apply the override for","items":{"type":"string","minLength":1}},"id":{"type":"array","default":[],"description":"List of client IDs to apply this override for","items":{"type":"string","minLength":1}},"agent":{"type":"array","default":[],"description":"List of user-agent regexes to apply this override for","items":{"type":"string","minLength":1,"format":"regex"}},"set":{"type":"object","default":{},"description":"Subset of settings object to merge"}}}}},"required":["internal","default","userSettingsEpoch"]};const schema43 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"settings","$defs":{"flag":{"type":"boolean"}},"type":"object","required":["timestamp","production","id","format","service","cover","book","misc","tweaks","flags"],"properties":{"timestamp":{"type":"integer","default":0,"description":"Timestamp when these settings were saved"},"production":{"type":"boolean","default":true,"description":"Whether FicLab is running in production mode"},"id":{"type":"string","default":"","description":"Client ID"},"format":{"type":"string","description":"Output file format","enum":["epub","mobi","pdf","md","txt","flb","docx","image","html","txt-tts"],"default":"epub"},"service":{"type":"object","description":"Service API endpoints","default":{},"required":["transcode"],"properties":{"transcode":{"type":"string","description":"Transcode API endpoint","default":"wss://transcode.ficlab.com/1"}}},"cover":{"type":"object","description":"Cover image configuration","default":{},"required":["scheme","crop","dark","logo","title","enable","custom"],"properties":{"scheme":{"type":"string","default":"auto","description":"Colour scheme","enum":["auto","red","orange","yellow","green","blue","purple","pink","brown","grey","black","clear"]},"crop":{"type":"string","default":"auto","description":"Cropping mode for the supplied story image","enum":["auto","on","off","fill"]},"dark":{"type":"boolean","default":false,"description":"Whether to use darker scheme colours"},"logo":{"type":"boolean","default":true,"description":"Whether to include the publisher logo on the cover"},"title":{"type":"boolean","default":true,"description":"Whether to render the title bar"},"enable":{"type":"boolean","default":true,"description":"Whether to generate a cover image at all"},"custom":{"type":"string","default":"","description":"Custom cover image"}}},"book":{"type":"object","default":{},"description":"Book configuration","required":["tags","status","numbers","paragraph","font","size","summary","cleanPunctuation","smartQuotes","stripBreaks","detectBreaks","matchBreaks"],"properties":{"tags":{"type":"array","default":[],"description":"Additional subject tags","items":{"type":"string","minLength":1}},"status":{"type":"string","default":"auto","description":"Story completion status","enum":["auto","complete","in-progress","hiatus","abandoned"]},"numbers":{"type":"string","default":"auto","description":"Chapter numbering mode","enum":["auto","on","off"]},"paragraph":{"type":"string","default":"space+indent","description":"Paragraph separation mode","enum":["space+indent","space","indent"]},"font":{"type":"string","default":"serif","description":"Font family to use for body text","enum":["serif","sans-serif"]},"size":{"type":"number","default":1,"description":"Scaling factor for body text"},"summary":{"type":"string","default":"","description":"Story sumary / description"},"cleanPunctuation":{"type":"boolean","default":true,"description":"Automatically clean up punctuation"},"smartQuotes":{"type":"boolean","default":true,"description":"Use smart quotes"},"stripBreaks":{"type":"boolean","default":false,"description":"Remove section breaks"},"detectBreaks":{"type":"boolean","default":true,"description":"Attempt to automatically detect textual section breaks"},"matchBreaks":{"type":"string","default":"","description":"Replace any matching paragraphs with a section break"}}},"misc":{"type":"object","default":{},"description":"Misc settings with no other logical home","required":["abandonAfter"],"properties":{"abandonAfter":{"type":"integer","default":31557600,"minimum":0,"description":"Number of seconds after which an in-progress story is considered abandoned"}}},"tweaks":{"type":"object","default":{},"description":"Various advanced controls","required":["delayFactor","backoff","pause","bucketSize","bucketRate","disable"],"properties":{"delayFactor":{"type":"number","default":0.05,"minimum":0,"description":"Delay factor to apply to resource fetching"},"maxDelay":{"type":"number","default":20,"minimum":0,"description":"Threshold beyond which the delay factor is considered an error"},"backoff":{"type":"number","default":1.5,"minimum":1,"description":"Backoff to apply to delay factor on 429 error"},"pause":{"type":"number","default":10,"minimum":0,"description":"How long to pause on 429 error"},"bucketSize":{"type":"number","default":20,"minimum":0,"description":"Burst bucket size"},"bucketRate":{"type":"number","default":2,"minimum":0,"description":"How fast the bucket refills (reqs/sec)"},"disable":{"type":"string","default":"","description":"Disable downloads, with the provided error message"},"warning":{"type":"string","default":"","description":"Display the provided warning message at idle-ready"},"gatherRecent":{"type":"integer","default":0,"description":"Gather metadata for recently published stories (0 to disable)"}}},"flags":{"type":"object","default":{},"description":"Feature flags (gatekeeper for development features)","required":["debugDetectBreaks"],"properties":{"debugDetectBreaks":{"$ref":"#/$defs/flag","default":false}}}}};const schema44 = {"type":"boolean"};const func7 = Object.prototype.hasOwnProperty;const func0 = require("ajv/dist/runtime/equal").default;const func12 = require("ajv/dist/runtime/ucs2length").default;function validate31(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="settings" */;let vErrors = null;let errors = 0;const evaluated0 = validate31.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(errors === 0){if(data && typeof data == "object" && !Array.isArray(data)){if(data.timestamp === undefined || data.timestamp === null || data.timestamp === ""){data.timestamp = 0;}if(data.production === undefined || data.production === null || data.production === ""){data.production = true;}if(data.id === undefined || data.id === null || data.id === ""){data.id = "";}if(data.format === undefined || data.format === null || data.format === ""){data.format = "epub";}if(data.service === undefined || data.service === null || data.service === ""){data.service = {};}if(data.cover === undefined || data.cover === null || data.cover === ""){data.cover = {};}if(data.book === undefined || data.book === null || data.book === ""){data.book = {};}if(data.misc === undefined || data.misc === null || data.misc === ""){data.misc = {};}if(data.tweaks === undefined || data.tweaks === null || data.tweaks === ""){data.tweaks = {};}if(data.flags === undefined || data.flags === null || data.flags === ""){data.flags = {};}let missing0;if(((((((((((data.timestamp === undefined) && (missing0 = "timestamp")) || ((data.production === undefined) && (missing0 = "production"))) || ((data.id === undefined) && (missing0 = "id"))) || ((data.format === undefined) && (missing0 = "format"))) || ((data.service === undefined) && (missing0 = "service"))) || ((data.cover === undefined) && (missing0 = "cover"))) || ((data.book === undefined) && (missing0 = "book"))) || ((data.misc === undefined) && (missing0 = "misc"))) || ((data.tweaks === undefined) && (missing0 = "tweaks"))) || ((data.flags === undefined) && (missing0 = "flags"))){validate31.errors = [{instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: missing0},message:"must have required property '"+missing0+"'"}];return false;}else {const _errs1 = errors;for(const key0 in data){if(!(func7.call(schema43.properties, key0))){delete data[key0];}}if(_errs1 === errors){let data0 = data.timestamp;const _errs2 = errors;if(!(((typeof data0 == "number") && (!(data0 % 1) && !isNaN(data0))) && (isFinite(data0)))){let dataType0 = typeof data0;let coerced0 = undefined;if(!(coerced0 !== undefined)){if(dataType0 === "boolean" || data0 === null
              || (dataType0 === "string" && data0 && data0 == +data0 && !(data0 % 1))){coerced0 = +data0;}else {validate31.errors = [{instancePath:instancePath+"/timestamp",schemaPath:"#/properties/timestamp/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced0 !== undefined){data0 = coerced0;if(data !== undefined){data["timestamp"] = coerced0;}}}var valid0 = _errs2 === errors;if(valid0){let data1 = data.production;const _errs4 = errors;if(typeof data1 !== "boolean"){let coerced1 = undefined;if(!(coerced1 !== undefined)){if(data1 === "false" || data1 === 0 || data1 === null){coerced1 = false;}else if(data1 === "true" || data1 === 1){coerced1 = true;}else {validate31.errors = [{instancePath:instancePath+"/production",schemaPath:"#/properties/production/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced1 !== undefined){data1 = coerced1;if(data !== undefined){data["production"] = coerced1;}}}var valid0 = _errs4 === errors;if(valid0){let data2 = data.id;const _errs6 = errors;if(typeof data2 !== "string"){let dataType2 = typeof data2;let coerced2 = undefined;if(!(coerced2 !== undefined)){if(dataType2 == "number" || dataType2 == "boolean"){coerced2 = "" + data2;}else if(data2 === null){coerced2 = "";}else {validate31.errors = [{instancePath:instancePath+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced2 !== undefined){data2 = coerced2;if(data !== undefined){data["id"] = coerced2;}}}var valid0 = _errs6 === errors;if(valid0){let data3 = data.format;const _errs8 = errors;if(typeof data3 !== "string"){let dataType3 = typeof data3;let coerced3 = undefined;if(!(coerced3 !== undefined)){if(dataType3 == "number" || dataType3 == "boolean"){coerced3 = "" + data3;}else if(data3 === null){coerced3 = "";}else {validate31.errors = [{instancePath:instancePath+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced3 !== undefined){data3 = coerced3;if(data !== undefined){data["format"] = coerced3;}}}if(!((((((((((data3 === "epub") || (data3 === "mobi")) || (data3 === "pdf")) || (data3 === "md")) || (data3 === "txt")) || (data3 === "flb")) || (data3 === "docx")) || (data3 === "image")) || (data3 === "html")) || (data3 === "txt-tts"))){validate31.errors = [{instancePath:instancePath+"/format",schemaPath:"#/properties/format/enum",keyword:"enum",params:{allowedValues: schema43.properties.format.enum},message:"must be equal to one of the allowed values"}];return false;}var valid0 = _errs8 === errors;if(valid0){let data4 = data.service;const _errs10 = errors;if(errors === _errs10){if(data4 && typeof data4 == "object" && !Array.isArray(data4)){if(data4.transcode === undefined || data4.transcode === null || data4.transcode === ""){data4.transcode = "wss://transcode.ficlab.com/1";}let missing1;if((data4.transcode === undefined) && (missing1 = "transcode")){validate31.errors = [{instancePath:instancePath+"/service",schemaPath:"#/properties/service/required",keyword:"required",params:{missingProperty: missing1},message:"must have required property '"+missing1+"'"}];return false;}else {const _errs12 = errors;for(const key1 in data4){if(!(key1 === "transcode")){delete data4[key1];}}if(_errs12 === errors){let data5 = data4.transcode;if(typeof data5 !== "string"){let dataType4 = typeof data5;let coerced4 = undefined;if(!(coerced4 !== undefined)){if(dataType4 == "number" || dataType4 == "boolean"){coerced4 = "" + data5;}else if(data5 === null){coerced4 = "";}else {validate31.errors = [{instancePath:instancePath+"/service/transcode",schemaPath:"#/properties/service/properties/transcode/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced4 !== undefined){data5 = coerced4;if(data4 !== undefined){data4["transcode"] = coerced4;}}}}}}else {validate31.errors = [{instancePath:instancePath+"/service",schemaPath:"#/properties/service/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs10 === errors;if(valid0){let data6 = data.cover;const _errs15 = errors;if(errors === _errs15){if(data6 && typeof data6 == "object" && !Array.isArray(data6)){if(data6.scheme === undefined || data6.scheme === null || data6.scheme === ""){data6.scheme = "auto";}if(data6.crop === undefined || data6.crop === null || data6.crop === ""){data6.crop = "auto";}if(data6.dark === undefined || data6.dark === null || data6.dark === ""){data6.dark = false;}if(data6.logo === undefined || data6.logo === null || data6.logo === ""){data6.logo = true;}if(data6.title === undefined || data6.title === null || data6.title === ""){data6.title = true;}if(data6.enable === undefined || data6.enable === null || data6.enable === ""){data6.enable = true;}if(data6.custom === undefined || data6.custom === null || data6.custom === ""){data6.custom = "";}let missing2;if((((((((data6.scheme === undefined) && (missing2 = "scheme")) || ((data6.crop === undefined) && (missing2 = "crop"))) || ((data6.dark === undefined) && (missing2 = "dark"))) || ((data6.logo === undefined) && (missing2 = "logo"))) || ((data6.title === undefined) && (missing2 = "title"))) || ((data6.enable === undefined) && (missing2 = "enable"))) || ((data6.custom === undefined) && (missing2 = "custom"))){validate31.errors = [{instancePath:instancePath+"/cover",schemaPath:"#/properties/cover/required",keyword:"required",params:{missingProperty: missing2},message:"must have required property '"+missing2+"'"}];return false;}else {const _errs17 = errors;for(const key2 in data6){if(!(((((((key2 === "scheme") || (key2 === "crop")) || (key2 === "dark")) || (key2 === "logo")) || (key2 === "title")) || (key2 === "enable")) || (key2 === "custom"))){delete data6[key2];}}if(_errs17 === errors){let data7 = data6.scheme;const _errs18 = errors;if(typeof data7 !== "string"){let dataType5 = typeof data7;let coerced5 = undefined;if(!(coerced5 !== undefined)){if(dataType5 == "number" || dataType5 == "boolean"){coerced5 = "" + data7;}else if(data7 === null){coerced5 = "";}else {validate31.errors = [{instancePath:instancePath+"/cover/scheme",schemaPath:"#/properties/cover/properties/scheme/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced5 !== undefined){data7 = coerced5;if(data6 !== undefined){data6["scheme"] = coerced5;}}}if(!((((((((((((data7 === "auto") || (data7 === "red")) || (data7 === "orange")) || (data7 === "yellow")) || (data7 === "green")) || (data7 === "blue")) || (data7 === "purple")) || (data7 === "pink")) || (data7 === "brown")) || (data7 === "grey")) || (data7 === "black")) || (data7 === "clear"))){validate31.errors = [{instancePath:instancePath+"/cover/scheme",schemaPath:"#/properties/cover/properties/scheme/enum",keyword:"enum",params:{allowedValues: schema43.properties.cover.properties.scheme.enum},message:"must be equal to one of the allowed values"}];return false;}var valid2 = _errs18 === errors;if(valid2){let data8 = data6.crop;const _errs20 = errors;if(typeof data8 !== "string"){let dataType6 = typeof data8;let coerced6 = undefined;if(!(coerced6 !== undefined)){if(dataType6 == "number" || dataType6 == "boolean"){coerced6 = "" + data8;}else if(data8 === null){coerced6 = "";}else {validate31.errors = [{instancePath:instancePath+"/cover/crop",schemaPath:"#/properties/cover/properties/crop/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced6 !== undefined){data8 = coerced6;if(data6 !== undefined){data6["crop"] = coerced6;}}}if(!((((data8 === "auto") || (data8 === "on")) || (data8 === "off")) || (data8 === "fill"))){validate31.errors = [{instancePath:instancePath+"/cover/crop",schemaPath:"#/properties/cover/properties/crop/enum",keyword:"enum",params:{allowedValues: schema43.properties.cover.properties.crop.enum},message:"must be equal to one of the allowed values"}];return false;}var valid2 = _errs20 === errors;if(valid2){let data9 = data6.dark;const _errs22 = errors;if(typeof data9 !== "boolean"){let coerced7 = undefined;if(!(coerced7 !== undefined)){if(data9 === "false" || data9 === 0 || data9 === null){coerced7 = false;}else if(data9 === "true" || data9 === 1){coerced7 = true;}else {validate31.errors = [{instancePath:instancePath+"/cover/dark",schemaPath:"#/properties/cover/properties/dark/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced7 !== undefined){data9 = coerced7;if(data6 !== undefined){data6["dark"] = coerced7;}}}var valid2 = _errs22 === errors;if(valid2){let data10 = data6.logo;const _errs24 = errors;if(typeof data10 !== "boolean"){let coerced8 = undefined;if(!(coerced8 !== undefined)){if(data10 === "false" || data10 === 0 || data10 === null){coerced8 = false;}else if(data10 === "true" || data10 === 1){coerced8 = true;}else {validate31.errors = [{instancePath:instancePath+"/cover/logo",schemaPath:"#/properties/cover/properties/logo/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced8 !== undefined){data10 = coerced8;if(data6 !== undefined){data6["logo"] = coerced8;}}}var valid2 = _errs24 === errors;if(valid2){let data11 = data6.title;const _errs26 = errors;if(typeof data11 !== "boolean"){let coerced9 = undefined;if(!(coerced9 !== undefined)){if(data11 === "false" || data11 === 0 || data11 === null){coerced9 = false;}else if(data11 === "true" || data11 === 1){coerced9 = true;}else {validate31.errors = [{instancePath:instancePath+"/cover/title",schemaPath:"#/properties/cover/properties/title/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced9 !== undefined){data11 = coerced9;if(data6 !== undefined){data6["title"] = coerced9;}}}var valid2 = _errs26 === errors;if(valid2){let data12 = data6.enable;const _errs28 = errors;if(typeof data12 !== "boolean"){let coerced10 = undefined;if(!(coerced10 !== undefined)){if(data12 === "false" || data12 === 0 || data12 === null){coerced10 = false;}else if(data12 === "true" || data12 === 1){coerced10 = true;}else {validate31.errors = [{instancePath:instancePath+"/cover/enable",schemaPath:"#/properties/cover/properties/enable/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced10 !== undefined){data12 = coerced10;if(data6 !== undefined){data6["enable"] = coerced10;}}}var valid2 = _errs28 === errors;if(valid2){let data13 = data6.custom;const _errs30 = errors;if(typeof data13 !== "string"){let dataType11 = typeof data13;let coerced11 = undefined;if(!(coerced11 !== undefined)){if(dataType11 == "number" || dataType11 == "boolean"){coerced11 = "" + data13;}else if(data13 === null){coerced11 = "";}else {validate31.errors = [{instancePath:instancePath+"/cover/custom",schemaPath:"#/properties/cover/properties/custom/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced11 !== undefined){data13 = coerced11;if(data6 !== undefined){data6["custom"] = coerced11;}}}var valid2 = _errs30 === errors;}}}}}}}}}else {validate31.errors = [{instancePath:instancePath+"/cover",schemaPath:"#/properties/cover/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs15 === errors;if(valid0){let data14 = data.book;const _errs32 = errors;if(errors === _errs32){if(data14 && typeof data14 == "object" && !Array.isArray(data14)){if(data14.tags === undefined || data14.tags === null || data14.tags === ""){data14.tags = [];}if(data14.status === undefined || data14.status === null || data14.status === ""){data14.status = "auto";}if(data14.numbers === undefined || data14.numbers === null || data14.numbers === ""){data14.numbers = "auto";}if(data14.paragraph === undefined || data14.paragraph === null || data14.paragraph === ""){data14.paragraph = "space+indent";}if(data14.font === undefined || data14.font === null || data14.font === ""){data14.font = "serif";}if(data14.size === undefined || data14.size === null || data14.size === ""){data14.size = 1;}if(data14.summary === undefined || data14.summary === null || data14.summary === ""){data14.summary = "";}if(data14.cleanPunctuation === undefined || data14.cleanPunctuation === null || data14.cleanPunctuation === ""){data14.cleanPunctuation = true;}if(data14.smartQuotes === undefined || data14.smartQuotes === null || data14.smartQuotes === ""){data14.smartQuotes = true;}if(data14.stripBreaks === undefined || data14.stripBreaks === null || data14.stripBreaks === ""){data14.stripBreaks = false;}if(data14.detectBreaks === undefined || data14.detectBreaks === null || data14.detectBreaks === ""){data14.detectBreaks = true;}if(data14.matchBreaks === undefined || data14.matchBreaks === null || data14.matchBreaks === ""){data14.matchBreaks = "";}let missing3;if(((((((((((((data14.tags === undefined) && (missing3 = "tags")) || ((data14.status === undefined) && (missing3 = "status"))) || ((data14.numbers === undefined) && (missing3 = "numbers"))) || ((data14.paragraph === undefined) && (missing3 = "paragraph"))) || ((data14.font === undefined) && (missing3 = "font"))) || ((data14.size === undefined) && (missing3 = "size"))) || ((data14.summary === undefined) && (missing3 = "summary"))) || ((data14.cleanPunctuation === undefined) && (missing3 = "cleanPunctuation"))) || ((data14.smartQuotes === undefined) && (missing3 = "smartQuotes"))) || ((data14.stripBreaks === undefined) && (missing3 = "stripBreaks"))) || ((data14.detectBreaks === undefined) && (missing3 = "detectBreaks"))) || ((data14.matchBreaks === undefined) && (missing3 = "matchBreaks"))){validate31.errors = [{instancePath:instancePath+"/book",schemaPath:"#/properties/book/required",keyword:"required",params:{missingProperty: missing3},message:"must have required property '"+missing3+"'"}];return false;}else {const _errs34 = errors;for(const key3 in data14){if(!(func7.call(schema43.properties.book.properties, key3))){delete data14[key3];}}if(_errs34 === errors){let data15 = data14.tags;const _errs35 = errors;if(errors === _errs35){if(Array.isArray(data15)){var valid4 = true;const len0 = data15.length;for(let i0=0; i0<len0; i0++){let data16 = data15[i0];const _errs37 = errors;if(typeof data16 !== "string"){let dataType12 = typeof data16;let coerced12 = undefined;if(!(coerced12 !== undefined)){if(dataType12 == "number" || dataType12 == "boolean"){coerced12 = "" + data16;}else if(data16 === null){coerced12 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/tags/" + i0,schemaPath:"#/properties/book/properties/tags/items/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced12 !== undefined){data16 = coerced12;if(data15 !== undefined){data15[i0] = coerced12;}}}if(errors === _errs37){if(typeof data16 === "string"){if(func12(data16) < 1){validate31.errors = [{instancePath:instancePath+"/book/tags/" + i0,schemaPath:"#/properties/book/properties/tags/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}}}var valid4 = _errs37 === errors;if(!valid4){break;}}}else {validate31.errors = [{instancePath:instancePath+"/book/tags",schemaPath:"#/properties/book/properties/tags/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid3 = _errs35 === errors;if(valid3){let data17 = data14.status;const _errs39 = errors;if(typeof data17 !== "string"){let dataType13 = typeof data17;let coerced13 = undefined;if(!(coerced13 !== undefined)){if(dataType13 == "number" || dataType13 == "boolean"){coerced13 = "" + data17;}else if(data17 === null){coerced13 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/status",schemaPath:"#/properties/book/properties/status/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced13 !== undefined){data17 = coerced13;if(data14 !== undefined){data14["status"] = coerced13;}}}if(!(((((data17 === "auto") || (data17 === "complete")) || (data17 === "in-progress")) || (data17 === "hiatus")) || (data17 === "abandoned"))){validate31.errors = [{instancePath:instancePath+"/book/status",schemaPath:"#/properties/book/properties/status/enum",keyword:"enum",params:{allowedValues: schema43.properties.book.properties.status.enum},message:"must be equal to one of the allowed values"}];return false;}var valid3 = _errs39 === errors;if(valid3){let data18 = data14.numbers;const _errs41 = errors;if(typeof data18 !== "string"){let dataType14 = typeof data18;let coerced14 = undefined;if(!(coerced14 !== undefined)){if(dataType14 == "number" || dataType14 == "boolean"){coerced14 = "" + data18;}else if(data18 === null){coerced14 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/numbers",schemaPath:"#/properties/book/properties/numbers/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced14 !== undefined){data18 = coerced14;if(data14 !== undefined){data14["numbers"] = coerced14;}}}if(!(((data18 === "auto") || (data18 === "on")) || (data18 === "off"))){validate31.errors = [{instancePath:instancePath+"/book/numbers",schemaPath:"#/properties/book/properties/numbers/enum",keyword:"enum",params:{allowedValues: schema43.properties.book.properties.numbers.enum},message:"must be equal to one of the allowed values"}];return false;}var valid3 = _errs41 === errors;if(valid3){let data19 = data14.paragraph;const _errs43 = errors;if(typeof data19 !== "string"){let dataType15 = typeof data19;let coerced15 = undefined;if(!(coerced15 !== undefined)){if(dataType15 == "number" || dataType15 == "boolean"){coerced15 = "" + data19;}else if(data19 === null){coerced15 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/paragraph",schemaPath:"#/properties/book/properties/paragraph/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced15 !== undefined){data19 = coerced15;if(data14 !== undefined){data14["paragraph"] = coerced15;}}}if(!(((data19 === "space+indent") || (data19 === "space")) || (data19 === "indent"))){validate31.errors = [{instancePath:instancePath+"/book/paragraph",schemaPath:"#/properties/book/properties/paragraph/enum",keyword:"enum",params:{allowedValues: schema43.properties.book.properties.paragraph.enum},message:"must be equal to one of the allowed values"}];return false;}var valid3 = _errs43 === errors;if(valid3){let data20 = data14.font;const _errs45 = errors;if(typeof data20 !== "string"){let dataType16 = typeof data20;let coerced16 = undefined;if(!(coerced16 !== undefined)){if(dataType16 == "number" || dataType16 == "boolean"){coerced16 = "" + data20;}else if(data20 === null){coerced16 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/font",schemaPath:"#/properties/book/properties/font/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced16 !== undefined){data20 = coerced16;if(data14 !== undefined){data14["font"] = coerced16;}}}if(!((data20 === "serif") || (data20 === "sans-serif"))){validate31.errors = [{instancePath:instancePath+"/book/font",schemaPath:"#/properties/book/properties/font/enum",keyword:"enum",params:{allowedValues: schema43.properties.book.properties.font.enum},message:"must be equal to one of the allowed values"}];return false;}var valid3 = _errs45 === errors;if(valid3){let data21 = data14.size;const _errs47 = errors;if(!((typeof data21 == "number") && (isFinite(data21)))){let dataType17 = typeof data21;let coerced17 = undefined;if(!(coerced17 !== undefined)){if(dataType17 == "boolean" || data21 === null
              || (dataType17 == "string" && data21 && data21 == +data21)){coerced17 = +data21;}else {validate31.errors = [{instancePath:instancePath+"/book/size",schemaPath:"#/properties/book/properties/size/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced17 !== undefined){data21 = coerced17;if(data14 !== undefined){data14["size"] = coerced17;}}}var valid3 = _errs47 === errors;if(valid3){let data22 = data14.summary;const _errs49 = errors;if(typeof data22 !== "string"){let dataType18 = typeof data22;let coerced18 = undefined;if(!(coerced18 !== undefined)){if(dataType18 == "number" || dataType18 == "boolean"){coerced18 = "" + data22;}else if(data22 === null){coerced18 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/summary",schemaPath:"#/properties/book/properties/summary/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced18 !== undefined){data22 = coerced18;if(data14 !== undefined){data14["summary"] = coerced18;}}}var valid3 = _errs49 === errors;if(valid3){let data23 = data14.cleanPunctuation;const _errs51 = errors;if(typeof data23 !== "boolean"){let coerced19 = undefined;if(!(coerced19 !== undefined)){if(data23 === "false" || data23 === 0 || data23 === null){coerced19 = false;}else if(data23 === "true" || data23 === 1){coerced19 = true;}else {validate31.errors = [{instancePath:instancePath+"/book/cleanPunctuation",schemaPath:"#/properties/book/properties/cleanPunctuation/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced19 !== undefined){data23 = coerced19;if(data14 !== undefined){data14["cleanPunctuation"] = coerced19;}}}var valid3 = _errs51 === errors;if(valid3){let data24 = data14.smartQuotes;const _errs53 = errors;if(typeof data24 !== "boolean"){let coerced20 = undefined;if(!(coerced20 !== undefined)){if(data24 === "false" || data24 === 0 || data24 === null){coerced20 = false;}else if(data24 === "true" || data24 === 1){coerced20 = true;}else {validate31.errors = [{instancePath:instancePath+"/book/smartQuotes",schemaPath:"#/properties/book/properties/smartQuotes/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced20 !== undefined){data24 = coerced20;if(data14 !== undefined){data14["smartQuotes"] = coerced20;}}}var valid3 = _errs53 === errors;if(valid3){let data25 = data14.stripBreaks;const _errs55 = errors;if(typeof data25 !== "boolean"){let coerced21 = undefined;if(!(coerced21 !== undefined)){if(data25 === "false" || data25 === 0 || data25 === null){coerced21 = false;}else if(data25 === "true" || data25 === 1){coerced21 = true;}else {validate31.errors = [{instancePath:instancePath+"/book/stripBreaks",schemaPath:"#/properties/book/properties/stripBreaks/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced21 !== undefined){data25 = coerced21;if(data14 !== undefined){data14["stripBreaks"] = coerced21;}}}var valid3 = _errs55 === errors;if(valid3){let data26 = data14.detectBreaks;const _errs57 = errors;if(typeof data26 !== "boolean"){let coerced22 = undefined;if(!(coerced22 !== undefined)){if(data26 === "false" || data26 === 0 || data26 === null){coerced22 = false;}else if(data26 === "true" || data26 === 1){coerced22 = true;}else {validate31.errors = [{instancePath:instancePath+"/book/detectBreaks",schemaPath:"#/properties/book/properties/detectBreaks/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced22 !== undefined){data26 = coerced22;if(data14 !== undefined){data14["detectBreaks"] = coerced22;}}}var valid3 = _errs57 === errors;if(valid3){let data27 = data14.matchBreaks;const _errs59 = errors;if(typeof data27 !== "string"){let dataType23 = typeof data27;let coerced23 = undefined;if(!(coerced23 !== undefined)){if(dataType23 == "number" || dataType23 == "boolean"){coerced23 = "" + data27;}else if(data27 === null){coerced23 = "";}else {validate31.errors = [{instancePath:instancePath+"/book/matchBreaks",schemaPath:"#/properties/book/properties/matchBreaks/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced23 !== undefined){data27 = coerced23;if(data14 !== undefined){data14["matchBreaks"] = coerced23;}}}var valid3 = _errs59 === errors;}}}}}}}}}}}}}}else {validate31.errors = [{instancePath:instancePath+"/book",schemaPath:"#/properties/book/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs32 === errors;if(valid0){let data28 = data.misc;const _errs61 = errors;if(errors === _errs61){if(data28 && typeof data28 == "object" && !Array.isArray(data28)){if(data28.abandonAfter === undefined || data28.abandonAfter === null || data28.abandonAfter === ""){data28.abandonAfter = 31557600;}let missing4;if((data28.abandonAfter === undefined) && (missing4 = "abandonAfter")){validate31.errors = [{instancePath:instancePath+"/misc",schemaPath:"#/properties/misc/required",keyword:"required",params:{missingProperty: missing4},message:"must have required property '"+missing4+"'"}];return false;}else {const _errs63 = errors;for(const key4 in data28){if(!(key4 === "abandonAfter")){delete data28[key4];}}if(_errs63 === errors){let data29 = data28.abandonAfter;const _errs64 = errors;if(!(((typeof data29 == "number") && (!(data29 % 1) && !isNaN(data29))) && (isFinite(data29)))){let dataType24 = typeof data29;let coerced24 = undefined;if(!(coerced24 !== undefined)){if(dataType24 === "boolean" || data29 === null
              || (dataType24 === "string" && data29 && data29 == +data29 && !(data29 % 1))){coerced24 = +data29;}else {validate31.errors = [{instancePath:instancePath+"/misc/abandonAfter",schemaPath:"#/properties/misc/properties/abandonAfter/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced24 !== undefined){data29 = coerced24;if(data28 !== undefined){data28["abandonAfter"] = coerced24;}}}if(errors === _errs64){if((typeof data29 == "number") && (isFinite(data29))){if(data29 < 0 || isNaN(data29)){validate31.errors = [{instancePath:instancePath+"/misc/abandonAfter",schemaPath:"#/properties/misc/properties/abandonAfter/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}}}}else {validate31.errors = [{instancePath:instancePath+"/misc",schemaPath:"#/properties/misc/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs61 === errors;if(valid0){let data30 = data.tweaks;const _errs66 = errors;if(errors === _errs66){if(data30 && typeof data30 == "object" && !Array.isArray(data30)){if(data30.delayFactor === undefined || data30.delayFactor === null || data30.delayFactor === ""){data30.delayFactor = 0.05;}if(data30.maxDelay === undefined || data30.maxDelay === null || data30.maxDelay === ""){data30.maxDelay = 20;}if(data30.backoff === undefined || data30.backoff === null || data30.backoff === ""){data30.backoff = 1.5;}if(data30.pause === undefined || data30.pause === null || data30.pause === ""){data30.pause = 10;}if(data30.bucketSize === undefined || data30.bucketSize === null || data30.bucketSize === ""){data30.bucketSize = 20;}if(data30.bucketRate === undefined || data30.bucketRate === null || data30.bucketRate === ""){data30.bucketRate = 2;}if(data30.disable === undefined || data30.disable === null || data30.disable === ""){data30.disable = "";}if(data30.warning === undefined || data30.warning === null || data30.warning === ""){data30.warning = "";}if(data30.gatherRecent === undefined || data30.gatherRecent === null || data30.gatherRecent === ""){data30.gatherRecent = 0;}let missing5;if(((((((data30.delayFactor === undefined) && (missing5 = "delayFactor")) || ((data30.backoff === undefined) && (missing5 = "backoff"))) || ((data30.pause === undefined) && (missing5 = "pause"))) || ((data30.bucketSize === undefined) && (missing5 = "bucketSize"))) || ((data30.bucketRate === undefined) && (missing5 = "bucketRate"))) || ((data30.disable === undefined) && (missing5 = "disable"))){validate31.errors = [{instancePath:instancePath+"/tweaks",schemaPath:"#/properties/tweaks/required",keyword:"required",params:{missingProperty: missing5},message:"must have required property '"+missing5+"'"}];return false;}else {const _errs68 = errors;for(const key5 in data30){if(!(func7.call(schema43.properties.tweaks.properties, key5))){delete data30[key5];}}if(_errs68 === errors){let data31 = data30.delayFactor;const _errs69 = errors;if(!((typeof data31 == "number") && (isFinite(data31)))){let dataType25 = typeof data31;let coerced25 = undefined;if(!(coerced25 !== undefined)){if(dataType25 == "boolean" || data31 === null
              || (dataType25 == "string" && data31 && data31 == +data31)){coerced25 = +data31;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/delayFactor",schemaPath:"#/properties/tweaks/properties/delayFactor/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced25 !== undefined){data31 = coerced25;if(data30 !== undefined){data30["delayFactor"] = coerced25;}}}if(errors === _errs69){if((typeof data31 == "number") && (isFinite(data31))){if(data31 < 0 || isNaN(data31)){validate31.errors = [{instancePath:instancePath+"/tweaks/delayFactor",schemaPath:"#/properties/tweaks/properties/delayFactor/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}var valid6 = _errs69 === errors;if(valid6){let data32 = data30.maxDelay;const _errs71 = errors;if(!((typeof data32 == "number") && (isFinite(data32)))){let dataType26 = typeof data32;let coerced26 = undefined;if(!(coerced26 !== undefined)){if(dataType26 == "boolean" || data32 === null
              || (dataType26 == "string" && data32 && data32 == +data32)){coerced26 = +data32;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/maxDelay",schemaPath:"#/properties/tweaks/properties/maxDelay/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced26 !== undefined){data32 = coerced26;if(data30 !== undefined){data30["maxDelay"] = coerced26;}}}if(errors === _errs71){if((typeof data32 == "number") && (isFinite(data32))){if(data32 < 0 || isNaN(data32)){validate31.errors = [{instancePath:instancePath+"/tweaks/maxDelay",schemaPath:"#/properties/tweaks/properties/maxDelay/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}var valid6 = _errs71 === errors;if(valid6){let data33 = data30.backoff;const _errs73 = errors;if(!((typeof data33 == "number") && (isFinite(data33)))){let dataType27 = typeof data33;let coerced27 = undefined;if(!(coerced27 !== undefined)){if(dataType27 == "boolean" || data33 === null
              || (dataType27 == "string" && data33 && data33 == +data33)){coerced27 = +data33;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/backoff",schemaPath:"#/properties/tweaks/properties/backoff/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced27 !== undefined){data33 = coerced27;if(data30 !== undefined){data30["backoff"] = coerced27;}}}if(errors === _errs73){if((typeof data33 == "number") && (isFinite(data33))){if(data33 < 1 || isNaN(data33)){validate31.errors = [{instancePath:instancePath+"/tweaks/backoff",schemaPath:"#/properties/tweaks/properties/backoff/minimum",keyword:"minimum",params:{comparison: ">=", limit: 1},message:"must be >= 1"}];return false;}}}var valid6 = _errs73 === errors;if(valid6){let data34 = data30.pause;const _errs75 = errors;if(!((typeof data34 == "number") && (isFinite(data34)))){let dataType28 = typeof data34;let coerced28 = undefined;if(!(coerced28 !== undefined)){if(dataType28 == "boolean" || data34 === null
              || (dataType28 == "string" && data34 && data34 == +data34)){coerced28 = +data34;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/pause",schemaPath:"#/properties/tweaks/properties/pause/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced28 !== undefined){data34 = coerced28;if(data30 !== undefined){data30["pause"] = coerced28;}}}if(errors === _errs75){if((typeof data34 == "number") && (isFinite(data34))){if(data34 < 0 || isNaN(data34)){validate31.errors = [{instancePath:instancePath+"/tweaks/pause",schemaPath:"#/properties/tweaks/properties/pause/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}var valid6 = _errs75 === errors;if(valid6){let data35 = data30.bucketSize;const _errs77 = errors;if(!((typeof data35 == "number") && (isFinite(data35)))){let dataType29 = typeof data35;let coerced29 = undefined;if(!(coerced29 !== undefined)){if(dataType29 == "boolean" || data35 === null
              || (dataType29 == "string" && data35 && data35 == +data35)){coerced29 = +data35;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/bucketSize",schemaPath:"#/properties/tweaks/properties/bucketSize/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced29 !== undefined){data35 = coerced29;if(data30 !== undefined){data30["bucketSize"] = coerced29;}}}if(errors === _errs77){if((typeof data35 == "number") && (isFinite(data35))){if(data35 < 0 || isNaN(data35)){validate31.errors = [{instancePath:instancePath+"/tweaks/bucketSize",schemaPath:"#/properties/tweaks/properties/bucketSize/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}var valid6 = _errs77 === errors;if(valid6){let data36 = data30.bucketRate;const _errs79 = errors;if(!((typeof data36 == "number") && (isFinite(data36)))){let dataType30 = typeof data36;let coerced30 = undefined;if(!(coerced30 !== undefined)){if(dataType30 == "boolean" || data36 === null
              || (dataType30 == "string" && data36 && data36 == +data36)){coerced30 = +data36;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/bucketRate",schemaPath:"#/properties/tweaks/properties/bucketRate/type",keyword:"type",params:{type: "number"},message:"must be number"}];return false;}}if(coerced30 !== undefined){data36 = coerced30;if(data30 !== undefined){data30["bucketRate"] = coerced30;}}}if(errors === _errs79){if((typeof data36 == "number") && (isFinite(data36))){if(data36 < 0 || isNaN(data36)){validate31.errors = [{instancePath:instancePath+"/tweaks/bucketRate",schemaPath:"#/properties/tweaks/properties/bucketRate/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"}];return false;}}}var valid6 = _errs79 === errors;if(valid6){let data37 = data30.disable;const _errs81 = errors;if(typeof data37 !== "string"){let dataType31 = typeof data37;let coerced31 = undefined;if(!(coerced31 !== undefined)){if(dataType31 == "number" || dataType31 == "boolean"){coerced31 = "" + data37;}else if(data37 === null){coerced31 = "";}else {validate31.errors = [{instancePath:instancePath+"/tweaks/disable",schemaPath:"#/properties/tweaks/properties/disable/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced31 !== undefined){data37 = coerced31;if(data30 !== undefined){data30["disable"] = coerced31;}}}var valid6 = _errs81 === errors;if(valid6){let data38 = data30.warning;const _errs83 = errors;if(typeof data38 !== "string"){let dataType32 = typeof data38;let coerced32 = undefined;if(!(coerced32 !== undefined)){if(dataType32 == "number" || dataType32 == "boolean"){coerced32 = "" + data38;}else if(data38 === null){coerced32 = "";}else {validate31.errors = [{instancePath:instancePath+"/tweaks/warning",schemaPath:"#/properties/tweaks/properties/warning/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced32 !== undefined){data38 = coerced32;if(data30 !== undefined){data30["warning"] = coerced32;}}}var valid6 = _errs83 === errors;if(valid6){let data39 = data30.gatherRecent;const _errs85 = errors;if(!(((typeof data39 == "number") && (!(data39 % 1) && !isNaN(data39))) && (isFinite(data39)))){let dataType33 = typeof data39;let coerced33 = undefined;if(!(coerced33 !== undefined)){if(dataType33 === "boolean" || data39 === null
              || (dataType33 === "string" && data39 && data39 == +data39 && !(data39 % 1))){coerced33 = +data39;}else {validate31.errors = [{instancePath:instancePath+"/tweaks/gatherRecent",schemaPath:"#/properties/tweaks/properties/gatherRecent/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced33 !== undefined){data39 = coerced33;if(data30 !== undefined){data30["gatherRecent"] = coerced33;}}}var valid6 = _errs85 === errors;}}}}}}}}}}}else {validate31.errors = [{instancePath:instancePath+"/tweaks",schemaPath:"#/properties/tweaks/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs66 === errors;if(valid0){let data40 = data.flags;const _errs87 = errors;if(errors === _errs87){if(data40 && typeof data40 == "object" && !Array.isArray(data40)){if(data40.debugDetectBreaks === undefined || data40.debugDetectBreaks === null || data40.debugDetectBreaks === ""){data40.debugDetectBreaks = false;}let missing6;if((data40.debugDetectBreaks === undefined) && (missing6 = "debugDetectBreaks")){validate31.errors = [{instancePath:instancePath+"/flags",schemaPath:"#/properties/flags/required",keyword:"required",params:{missingProperty: missing6},message:"must have required property '"+missing6+"'"}];return false;}else {const _errs89 = errors;for(const key6 in data40){if(!(key6 === "debugDetectBreaks")){delete data40[key6];}}if(_errs89 === errors){let data41 = data40.debugDetectBreaks;if(typeof data41 !== "boolean"){let coerced34 = undefined;if(!(coerced34 !== undefined)){if(data41 === "false" || data41 === 0 || data41 === null){coerced34 = false;}else if(data41 === "true" || data41 === 1){coerced34 = true;}else {validate31.errors = [{instancePath:instancePath+"/flags/debugDetectBreaks",schemaPath:"#/$defs/flag/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced34 !== undefined){data41 = coerced34;if(data40 !== undefined){data40["debugDetectBreaks"] = coerced34;}}}}}}else {validate31.errors = [{instancePath:instancePath+"/flags",schemaPath:"#/properties/flags/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid0 = _errs87 === errors;}}}}}}}}}}}}else {validate31.errors = [{instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}validate31.errors = vErrors;return errors === 0;}validate31.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const formats0 = require("ajv-formats/dist/formats").fullFormats.regex;function validate30(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="provision" */;let vErrors = null;let errors = 0;const evaluated0 = validate30.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(errors === 0){if(data && typeof data == "object" && !Array.isArray(data)){if(data.internal === undefined || data.internal === null || data.internal === ""){data.internal = false;}if(data.retrieved === undefined || data.retrieved === null || data.retrieved === ""){data.retrieved = 0;}if(data.default === undefined || data.default === null || data.default === ""){data.default = {};}if(data.tosEpoch === undefined || data.tosEpoch === null || data.tosEpoch === ""){data.tosEpoch = 0;}if(data.userSettingsEpoch === undefined || data.userSettingsEpoch === null || data.userSettingsEpoch === ""){data.userSettingsEpoch = 0;}if(data.userSettingsOverride === undefined || data.userSettingsOverride === null || data.userSettingsOverride === ""){data.userSettingsOverride = [];}let missing0;if((((data.internal === undefined) && (missing0 = "internal")) || ((data.default === undefined) && (missing0 = "default"))) || ((data.userSettingsEpoch === undefined) && (missing0 = "userSettingsEpoch"))){validate30.errors = [{instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: missing0},message:"must have required property '"+missing0+"'"}];return false;}else {const _errs1 = errors;for(const key0 in data){if(!((((((key0 === "internal") || (key0 === "retrieved")) || (key0 === "default")) || (key0 === "tosEpoch")) || (key0 === "userSettingsEpoch")) || (key0 === "userSettingsOverride"))){delete data[key0];}}if(_errs1 === errors){let data0 = data.internal;const _errs2 = errors;if(typeof data0 !== "boolean"){let coerced0 = undefined;if(!(coerced0 !== undefined)){if(data0 === "false" || data0 === 0 || data0 === null){coerced0 = false;}else if(data0 === "true" || data0 === 1){coerced0 = true;}else {validate30.errors = [{instancePath:instancePath+"/internal",schemaPath:"#/properties/internal/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced0 !== undefined){data0 = coerced0;if(data !== undefined){data["internal"] = coerced0;}}}var valid0 = _errs2 === errors;if(valid0){let data1 = data.retrieved;const _errs4 = errors;if(!(((typeof data1 == "number") && (!(data1 % 1) && !isNaN(data1))) && (isFinite(data1)))){let dataType1 = typeof data1;let coerced1 = undefined;if(!(coerced1 !== undefined)){if(dataType1 === "boolean" || data1 === null
              || (dataType1 === "string" && data1 && data1 == +data1 && !(data1 % 1))){coerced1 = +data1;}else {validate30.errors = [{instancePath:instancePath+"/retrieved",schemaPath:"#/properties/retrieved/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced1 !== undefined){data1 = coerced1;if(data !== undefined){data["retrieved"] = coerced1;}}}var valid0 = _errs4 === errors;if(valid0){const _errs6 = errors;if(!(validate31(data.default, {instancePath:instancePath+"/default",parentData:data,parentDataProperty:"default",rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate31.errors : vErrors.concat(validate31.errors);errors = vErrors.length;}var valid0 = _errs6 === errors;if(valid0){let data3 = data.tosEpoch;const _errs7 = errors;if(!(((typeof data3 == "number") && (!(data3 % 1) && !isNaN(data3))) && (isFinite(data3)))){let dataType2 = typeof data3;let coerced2 = undefined;if(!(coerced2 !== undefined)){if(dataType2 === "boolean" || data3 === null
              || (dataType2 === "string" && data3 && data3 == +data3 && !(data3 % 1))){coerced2 = +data3;}else {validate30.errors = [{instancePath:instancePath+"/tosEpoch",schemaPath:"#/properties/tosEpoch/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced2 !== undefined){data3 = coerced2;if(data !== undefined){data["tosEpoch"] = coerced2;}}}var valid0 = _errs7 === errors;if(valid0){let data4 = data.userSettingsEpoch;const _errs9 = errors;if(!(((typeof data4 == "number") && (!(data4 % 1) && !isNaN(data4))) && (isFinite(data4)))){let dataType3 = typeof data4;let coerced3 = undefined;if(!(coerced3 !== undefined)){if(dataType3 === "boolean" || data4 === null
              || (dataType3 === "string" && data4 && data4 == +data4 && !(data4 % 1))){coerced3 = +data4;}else {validate30.errors = [{instancePath:instancePath+"/userSettingsEpoch",schemaPath:"#/properties/userSettingsEpoch/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced3 !== undefined){data4 = coerced3;if(data !== undefined){data["userSettingsEpoch"] = coerced3;}}}var valid0 = _errs9 === errors;if(valid0){let data5 = data.userSettingsOverride;const _errs11 = errors;if(errors === _errs11){if(Array.isArray(data5)){var valid1 = true;const len0 = data5.length;for(let i0=0; i0<len0; i0++){let data6 = data5[i0];const _errs13 = errors;if(errors === _errs13){if(data6 && typeof data6 == "object" && !Array.isArray(data6)){if(data6.from === undefined || data6.from === null || data6.from === ""){data6.from = 0;}if(data6.fromVersion === undefined || data6.fromVersion === null || data6.fromVersion === ""){data6.fromVersion = "";}if(data6.until === undefined || data6.until === null || data6.until === ""){data6.until = 0;}if(data6.untilVersion === undefined || data6.untilVersion === null || data6.untilVersion === ""){data6.untilVersion = "";}if(data6.production === undefined || data6.production === null || data6.production === ""){data6.production = true;}if(data6.origin === undefined || data6.origin === null || data6.origin === ""){data6.origin = [];}if(data6.context === undefined || data6.context === null || data6.context === ""){data6.context = [];}if(data6.id === undefined || data6.id === null || data6.id === ""){data6.id = [];}if(data6.agent === undefined || data6.agent === null || data6.agent === ""){data6.agent = [];}if(data6.set === undefined || data6.set === null || data6.set === ""){data6.set = {};}let missing1;if((((((((((data6.from === undefined) && (missing1 = "from")) || ((data6.fromVersion === undefined) && (missing1 = "fromVersion"))) || ((data6.until === undefined) && (missing1 = "until"))) || ((data6.untilVersion === undefined) && (missing1 = "untilVersion"))) || ((data6.production === undefined) && (missing1 = "production"))) || ((data6.origin === undefined) && (missing1 = "origin"))) || ((data6.context === undefined) && (missing1 = "context"))) || ((data6.id === undefined) && (missing1 = "id"))) || ((data6.set === undefined) && (missing1 = "set"))){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0,schemaPath:"#/properties/userSettingsOverride/items/required",keyword:"required",params:{missingProperty: missing1},message:"must have required property '"+missing1+"'"}];return false;}else {const _errs15 = errors;for(const key1 in data6){if(!(func7.call(schema42.properties.userSettingsOverride.items.properties, key1))){delete data6[key1];}}if(_errs15 === errors){let data7 = data6.from;const _errs16 = errors;if(!(((typeof data7 == "number") && (!(data7 % 1) && !isNaN(data7))) && (isFinite(data7)))){let dataType4 = typeof data7;let coerced4 = undefined;if(!(coerced4 !== undefined)){if(dataType4 === "boolean" || data7 === null
              || (dataType4 === "string" && data7 && data7 == +data7 && !(data7 % 1))){coerced4 = +data7;}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/from",schemaPath:"#/properties/userSettingsOverride/items/properties/from/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced4 !== undefined){data7 = coerced4;if(data6 !== undefined){data6["from"] = coerced4;}}}var valid2 = _errs16 === errors;if(valid2){let data8 = data6.fromVersion;const _errs18 = errors;if(typeof data8 !== "string"){let dataType5 = typeof data8;let coerced5 = undefined;if(!(coerced5 !== undefined)){if(dataType5 == "number" || dataType5 == "boolean"){coerced5 = "" + data8;}else if(data8 === null){coerced5 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/fromVersion",schemaPath:"#/properties/userSettingsOverride/items/properties/fromVersion/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced5 !== undefined){data8 = coerced5;if(data6 !== undefined){data6["fromVersion"] = coerced5;}}}var valid2 = _errs18 === errors;if(valid2){let data9 = data6.until;const _errs20 = errors;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){let dataType6 = typeof data9;let coerced6 = undefined;if(!(coerced6 !== undefined)){if(dataType6 === "boolean" || data9 === null
              || (dataType6 === "string" && data9 && data9 == +data9 && !(data9 % 1))){coerced6 = +data9;}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/until",schemaPath:"#/properties/userSettingsOverride/items/properties/until/type",keyword:"type",params:{type: "integer"},message:"must be integer"}];return false;}}if(coerced6 !== undefined){data9 = coerced6;if(data6 !== undefined){data6["until"] = coerced6;}}}var valid2 = _errs20 === errors;if(valid2){let data10 = data6.untilVersion;const _errs22 = errors;if(typeof data10 !== "string"){let dataType7 = typeof data10;let coerced7 = undefined;if(!(coerced7 !== undefined)){if(dataType7 == "number" || dataType7 == "boolean"){coerced7 = "" + data10;}else if(data10 === null){coerced7 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/untilVersion",schemaPath:"#/properties/userSettingsOverride/items/properties/untilVersion/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced7 !== undefined){data10 = coerced7;if(data6 !== undefined){data6["untilVersion"] = coerced7;}}}var valid2 = _errs22 === errors;if(valid2){let data11 = data6.production;const _errs24 = errors;if(typeof data11 !== "boolean"){let coerced8 = undefined;if(!(coerced8 !== undefined)){if(data11 === "false" || data11 === 0 || data11 === null){coerced8 = false;}else if(data11 === "true" || data11 === 1){coerced8 = true;}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/production",schemaPath:"#/properties/userSettingsOverride/items/properties/production/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"}];return false;}}if(coerced8 !== undefined){data11 = coerced8;if(data6 !== undefined){data6["production"] = coerced8;}}}var valid2 = _errs24 === errors;if(valid2){let data12 = data6.origin;const _errs26 = errors;if(errors === _errs26){if(Array.isArray(data12)){var valid3 = true;const len1 = data12.length;for(let i1=0; i1<len1; i1++){let data13 = data12[i1];const _errs28 = errors;if(typeof data13 !== "string"){let dataType9 = typeof data13;let coerced9 = undefined;if(!(coerced9 !== undefined)){if(dataType9 == "number" || dataType9 == "boolean"){coerced9 = "" + data13;}else if(data13 === null){coerced9 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/origin/" + i1,schemaPath:"#/properties/userSettingsOverride/items/properties/origin/items/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced9 !== undefined){data13 = coerced9;if(data12 !== undefined){data12[i1] = coerced9;}}}if(errors === _errs28){if(typeof data13 === "string"){if(func12(data13) < 1){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/origin/" + i1,schemaPath:"#/properties/userSettingsOverride/items/properties/origin/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}}}var valid3 = _errs28 === errors;if(!valid3){break;}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/origin",schemaPath:"#/properties/userSettingsOverride/items/properties/origin/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid2 = _errs26 === errors;if(valid2){let data14 = data6.context;const _errs30 = errors;if(errors === _errs30){if(Array.isArray(data14)){var valid4 = true;const len2 = data14.length;for(let i2=0; i2<len2; i2++){let data15 = data14[i2];const _errs32 = errors;if(typeof data15 !== "string"){let dataType10 = typeof data15;let coerced10 = undefined;if(!(coerced10 !== undefined)){if(dataType10 == "number" || dataType10 == "boolean"){coerced10 = "" + data15;}else if(data15 === null){coerced10 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/context/" + i2,schemaPath:"#/properties/userSettingsOverride/items/properties/context/items/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced10 !== undefined){data15 = coerced10;if(data14 !== undefined){data14[i2] = coerced10;}}}if(errors === _errs32){if(typeof data15 === "string"){if(func12(data15) < 1){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/context/" + i2,schemaPath:"#/properties/userSettingsOverride/items/properties/context/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}}}var valid4 = _errs32 === errors;if(!valid4){break;}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/context",schemaPath:"#/properties/userSettingsOverride/items/properties/context/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid2 = _errs30 === errors;if(valid2){let data16 = data6.id;const _errs34 = errors;if(errors === _errs34){if(Array.isArray(data16)){var valid5 = true;const len3 = data16.length;for(let i3=0; i3<len3; i3++){let data17 = data16[i3];const _errs36 = errors;if(typeof data17 !== "string"){let dataType11 = typeof data17;let coerced11 = undefined;if(!(coerced11 !== undefined)){if(dataType11 == "number" || dataType11 == "boolean"){coerced11 = "" + data17;}else if(data17 === null){coerced11 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/id/" + i3,schemaPath:"#/properties/userSettingsOverride/items/properties/id/items/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced11 !== undefined){data17 = coerced11;if(data16 !== undefined){data16[i3] = coerced11;}}}if(errors === _errs36){if(typeof data17 === "string"){if(func12(data17) < 1){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/id/" + i3,schemaPath:"#/properties/userSettingsOverride/items/properties/id/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}}}var valid5 = _errs36 === errors;if(!valid5){break;}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/id",schemaPath:"#/properties/userSettingsOverride/items/properties/id/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid2 = _errs34 === errors;if(valid2){let data18 = data6.agent;const _errs38 = errors;if(errors === _errs38){if(Array.isArray(data18)){var valid6 = true;const len4 = data18.length;for(let i4=0; i4<len4; i4++){let data19 = data18[i4];const _errs40 = errors;if(typeof data19 !== "string"){let dataType12 = typeof data19;let coerced12 = undefined;if(!(coerced12 !== undefined)){if(dataType12 == "number" || dataType12 == "boolean"){coerced12 = "" + data19;}else if(data19 === null){coerced12 = "";}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/agent/" + i4,schemaPath:"#/properties/userSettingsOverride/items/properties/agent/items/type",keyword:"type",params:{type: "string"},message:"must be string"}];return false;}}if(coerced12 !== undefined){data19 = coerced12;if(data18 !== undefined){data18[i4] = coerced12;}}}if(errors === _errs40){if(errors === _errs40){if(typeof data19 === "string"){if(func12(data19) < 1){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/agent/" + i4,schemaPath:"#/properties/userSettingsOverride/items/properties/agent/items/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"}];return false;}else {if(!(formats0(data19))){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/agent/" + i4,schemaPath:"#/properties/userSettingsOverride/items/properties/agent/items/format",keyword:"format",params:{format: "regex"},message:"must match format \""+"regex"+"\""}];return false;}}}}}var valid6 = _errs40 === errors;if(!valid6){break;}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/agent",schemaPath:"#/properties/userSettingsOverride/items/properties/agent/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid2 = _errs38 === errors;if(valid2){let data20 = data6.set;const _errs42 = errors;if(!(data20 && typeof data20 == "object" && !Array.isArray(data20))){validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0+"/set",schemaPath:"#/properties/userSettingsOverride/items/properties/set/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}var valid2 = _errs42 === errors;}}}}}}}}}}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride/" + i0,schemaPath:"#/properties/userSettingsOverride/items/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}var valid1 = _errs13 === errors;if(!valid1){break;}}}else {validate30.errors = [{instancePath:instancePath+"/userSettingsOverride",schemaPath:"#/properties/userSettingsOverride/type",keyword:"type",params:{type: "array"},message:"must be array"}];return false;}}var valid0 = _errs11 === errors;}}}}}}}}else {validate30.errors = [{instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"}];return false;}}validate30.errors = vErrors;return errors === 0;}validate30.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};